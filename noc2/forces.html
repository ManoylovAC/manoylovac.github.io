<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 4.25.7"/><meta data-react-helmet="true" name="description" content="У фінальному прикладі Розділу 1 я продемонстрував, як обчислити динамічне прискорення на основі вектора, що вказує від кульки на полотні до положення "/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" property="og:url" content="https://natureofcode.com"/><meta data-react-helmet="true" property="og:image" content="https://natureofcode.com/static/7dd3422c43faa1513528cd25636d9e6b/b08a9/cover.png"/><meta data-react-helmet="true" property="og:title" content="2. Сили"/><meta data-react-helmet="true" property="og:description" content="У фінальному прикладі Розділу 1 я продемонстрував, як обчислити динамічне прискорення на основі вектора, що вказує від кульки на полотні до положення "/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:title" content="2. Сили"/><meta data-react-helmet="true" name="twitter:description" content="У фінальному прикладі Розділу 1 я продемонстрував, як обчислити динамічне прискорення на основі вектора, що вказує від кульки на полотні до положення "/><meta data-react-helmet="true" name="twitter:image" content="https://natureofcode.com/static/7dd3422c43faa1513528cd25636d9e6b/b08a9/cover.png"/>

  <link rel="stylesheet" href="./assets/styles/global.css">

  <noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><link rel="icon" href="./favicon-32x32.png" type="image/png"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png"/><title data-react-helmet="true">2. Сили / Nature of Code</title></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><header class="fixed left-0 right-0 top-0 z-40 bg-white px-6 lg:px-8"><div class="mx-auto flex h-[5em] max-w-6xl items-center justify-between"><div class="flex flex-col gap-x-6 lg:flex-row lg:items-center"><a href="./"><span class="text-lg font-black tracking-widest text-noc-400"><span class="font-black">ПРИРОДА</span> КОДУ</span></a><span class="hidden text-sm tracking-widest text-noc-400 xl:block">ДАНІЕЛЬ ШИФФМАН</span></div><button class="flex h-9 w-11 cursor-pointer flex-col items-center justify-between p-2 lg:hidden" aria-label="Toggle menu" title="Toggle menu"><span class="block h-0.5 w-full rounded bg-noc-200 transition-transform"></span><span class="block h-0.5 w-full rounded bg-noc-200 transition-opacity" style="opacity:1"></span><span class="block h-0.5 w-full rounded bg-noc-200 transition-transform"></span></button><div class="hidden items-center gap-6 lg:flex"><ul class="flex items-center gap-6"><li><a href="https://github.com/sponsors/CodingTrain" class="flex items-center gap-1.5 text-sm text-gray-500 hover:underline"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="text-noc-200" height="1.2em" width="1.2em" xmlns="http://www.w3.org/2000/svg"><path d="M458.4 64.3C400.6 15.7 311.3 23 256 79.3 200.7 23 111.4 15.6 53.6 64.3-21.6 127.6-10.6 230.8 43 285.5l175.4 178.7c10 10.2 23.4 15.9 37.6 15.9 14.3 0 27.6-5.6 37.6-15.8L469 285.6c53.5-54.7 64.7-157.9-10.6-221.3zm-23.6 187.5L259.4 430.5c-2.4 2.4-4.4 2.4-6.8 0L77.2 251.8c-36.5-37.2-43.9-107.6 7.3-150.7 38.9-32.7 98.9-27.8 136.5 10.5l35 35.7 35-35.7c37.8-38.5 97.8-43.2 136.5-10.6 51.1 43.1 43.5 113.9 7.3 150.8z"></path></svg>SUPPORT</a></li><li><a href="https://github.com/nature-of-code/noc-book-2" class="flex items-center gap-1.5 text-sm text-gray-500 hover:underline"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 496 512" class="text-noc-200" height="1.2em" width="1.2em" xmlns="http://www.w3.org/2000/svg"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg>GITHUB</a></li><li><a href="https://thecodingtrain.com/" class="flex items-center text-sm text-gray-500 hover:underline"><img src="./static/codingtrain_logo-53b0a841be45c7eac7a12f88b7bea596.png" alt="Coding Train&#x27;s logo" class="-ml-2 w-8"/>CODING TRAIN</a></li></ul><div class="not-prose flex items-center gap-4 undefined"><div class="relative"><a href="https://natureofcode.com/" target="_blank" class="flex items-center text-sm text-gray-500 hover:underline"><img src="./favicon-32x32.png" alt="The Nature Of Code logo" class="noc2-logo"/>THE NATURE OF CODE</a></div></div></div></div></header>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-YD31R75NSS"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-YD31R75NSS');
  </script>
  <nav class="fixed bottom-0 left-0 right-0 top-[5em] z-20 overflow-y-auto bg-white px-6 lg:hidden mb-menu hidden">
    <ul class="my-7 space-y-2">
      <li><a class="text-lg text-gray-800" href="./dedication.html">Присвята</a></li>
      <li><a class="text-lg text-gray-800" href="./acknowledgements.html">Подяки</a></li>
      <li><a class="text-lg text-gray-800" href="./introduction.html">Вступ</a></li>
      <li>
        <button class="sub-menu-btn flex items-center gap-2 text-lg text-gray-800">
          <span>Розділи</span>
          <svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" class="h-5 w-5 transition-transform" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg" style="transform: scaleY(1);"><polyline points="6 9 12 15 18 9"></polyline></svg>
        </button>
        <ul class="space-y-2 py-2 pl-4 sub-menu hidden">
          <li><a class="flex items-center text-gray-600" href="./random.html"><span class="w-8">0</span><span>Випадковість</span></a></li>
          <li><a class="flex items-center text-gray-600" href="./vectors.html"><span class="w-8">1</span><span>Вектори</span></a></li>
          <li><a aria-current="page" class="flex items-center text-gray-600 font-bold" href="./forces.html"><span class="w-8">2</span><span>Сили</span></a></li>
          <li><a class="flex items-center text-gray-600" href="./oscillation.html"><span class="w-8">3</span><span>Коливання</span></a></li>
          <li><a class="flex items-center text-gray-600" href="./particles.html"><span class="w-8">4</span><span>Система частинок</span></a></li>
          <li><a class="flex items-center text-gray-600" href="./autonomous-agents.html"><span class="w-8">5</span><span>Автономні агенти</span></a></li>
          <li><a class="flex items-center text-gray-600" href="./physics-libraries.html"><span class="w-8">6</span><span>Фізичні бібліотеки</span></a></li>
          <li><a class="flex items-center text-gray-600" href="./cellular-automata.html"><span class="w-8">7</span><span>Клітинні автомати</span></a></li>
          <li><a class="flex items-center text-gray-600" href="./fractals.html"><span class="w-8">8</span><span>Фрактали</span></a></li>
          <li><a class="flex items-center text-gray-600" href="./genetic-algorithms.html"><span class="w-8">9</span><span>Еволюційне моделювання</span></a></li>
          <li><a class="flex items-center text-gray-600" href="./neural-networks.html"><span class="w-8">10</span><span>Нейронні мережі</span></a></li>
          <li><a class="flex items-center text-gray-600" href="./neuroevolution.html"><span class="w-8">11</span><span>Нейроеволюція</span></a></li>
        </ul>
      </li>
      <li><a class="text-lg text-gray-800" href="./appendix-creature.html">Додаток: Дизайн створінь</a></li>
      <li><a class="text-lg text-gray-800" href="./resources.html">Додаткові ресурси</a></li>
      <li><a class="text-lg text-gray-800" href="./credits.html">Credits</a></li>
      <li><a class="text-lg text-gray-800" href="./translation.html">Про переклад</a></li>
      <li><a class="text-lg text-gray-800" href="./examples.html">Приклади</a></li>
    </ul>
    <ul class="my-7 space-y-2">
      <li><a target="_blank" href="https://github.com/sponsors/CodingTrain" class="flex items-center gap-1 text-lg text-gray-800">Support<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" class="w-3.5 text-gray-400" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></a></li>
      <li><a target="_blank" href="https://github.com/nature-of-code/noc-book-2" class="flex items-center gap-1 text-lg text-gray-800">GitHub<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" class="w-3.5 text-gray-400" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></a></li>
      <li><a target="_blank" href="https://thecodingtrain.com/" class="flex items-center gap-1 text-lg text-gray-800">Coding Train<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" class="w-3.5 text-gray-400" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></a></li>

      <li><a target="_blank" href="https://natureofcode.com/" class="flex items-center gap-1 text-lg text-gray-800">The Nature Of Code<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" class="w-3.5 text-gray-400" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></a></li>
    </ul>
  </nav>
  <div class="mt-[6em] px-6 lg:px-8"><div class="mx-auto max-w-6xl lg:flex lg:justify-between lg:gap-10 xl:gap-14"><aside class="sticky top-[6em] z-10 hidden max-h-[calc(100vh-6em)] min-w-[14em] overflow-y-auto pb-8 lg:block lg:flex-grow"><nav class="border-noc-200 rounded-3xl border"><ul class="divide-noc-200 divide-y"><li><a class="relative block px-3 py-2 text-sm hover:underline" href="./dedication.html">Присвята</a></li><li><a class="relative block px-3 py-2 text-sm hover:underline" href="./acknowledgements.html">Подяки</a></li><li><a class="relative block px-3 py-2 text-sm hover:underline" href="./introduction.html">Вступ</a></li><li><a class="group relative flex items-center px-3 py-2 text-sm" href="./random.html"><span class="w-8">0</span><span class="group-hover:underline">Випадковість</span></a></li><li><a class="group relative flex items-center px-3 py-2 text-sm" href="./vectors.html"><span class="w-8">1</span><span class="group-hover:underline">Вектори</span></a></li><li><a aria-current="page" class="group relative flex items-center px-3 py-2 text-sm font-bold" href="./forces.html"><span class="w-8">2</span><span class="group-hover:underline">Сили</span></a><ul class="space-y-1 pb-2"><li><a href="#forces-and-newtons-laws-of-motion" class="ml-11 block py-0.5 pr-2 text-sm text-gray-500 hover:underline false">Сили й закони руху Ньютона</a></li><li><a href="#force-accumulation" class="ml-11 block py-0.5 pr-2 text-sm text-gray-500 hover:underline false">Акумуляція сил</a></li><li><a href="#factoring-in-mass" class="ml-11 block py-0.5 pr-2 text-sm text-gray-500 hover:underline false">Фактор маси</a></li><li><a href="#creating-forces" class="ml-11 block py-0.5 pr-2 text-sm text-gray-500 hover:underline false">Створення сил</a></li><li><a href="#modeling-a-force" class="ml-11 block py-0.5 pr-2 text-sm text-gray-500 hover:underline false">Моделювання сили</a></li><li><a href="#the-n-body-problem" class="ml-11 block py-0.5 pr-2 text-sm text-gray-500 hover:underline false">Гравітаційна задача N тіл</a></li></ul></li><li><a class="group relative flex items-center px-3 py-2 text-sm" href="./oscillation.html"><span class="w-8">3</span><span class="group-hover:underline">Коливання</span></a></li><li><a class="group relative flex items-center px-3 py-2 text-sm" href="./particles.html"><span class="w-8">4</span><span class="group-hover:underline">Системи частинок</span></a></li><li><a class="group relative flex items-center px-3 py-2 text-sm" href="./autonomous-agents.html"><span class="w-8">5</span><span class="group-hover:underline">Автономні агенти</span></a></li><li><a class="group relative flex items-center px-3 py-2 text-sm" href="./physics-libraries.html"><span class="w-8">6</span><span class="group-hover:underline">Фізичні бібліотеки</span></a></li><li><a class="group relative flex items-center px-3 py-2 text-sm" href="./cellular-automata.html"><span class="w-8">7</span><span class="group-hover:underline">Клітинні автомати</span></a></li><li><a class="group relative flex items-center px-3 py-2 text-sm" href="./fractals.html"><span class="w-8">8</span><span class="group-hover:underline">Фрактали</span></a></li><li><a class="group relative flex items-center px-3 py-2 text-sm" href="./genetic-algorithms.html"><span class="w-8">9</span><span class="group-hover:underline">Еволюційне моделювання</span></a></li><li><a class="group relative flex items-center px-3 py-2 text-sm" href="./neural-networks.html"><span class="w-8">10</span><span class="group-hover:underline">Нейронні мережі</span></a></li><li><a class="group relative flex items-center px-3 py-2 text-sm" href="./neuroevolution.html"><span class="w-8">11</span><span class="group-hover:underline">Нейроеволюція</span></a></li><li><a class="relative block px-3 py-2 text-sm hover:underline" href="./appendix-creature.html">Додаток: Дизайн створінь </a></li><li><a class="relative block px-3 py-2 text-sm hover:underline" href="./resources.html">Додаткові ресурси</a></li><li><a class="relative block px-3 py-2 text-sm hover:underline" href="./credits.html">Credits</a></li><li><a class="relative block px-3 py-2 text-sm hover:underline" href="./translation.html">Про переклад</a></li><li><a class="relative block px-3 py-2 text-sm hover:underline" href="./examples.html">Приклади</a></li></ul></nav></aside><main class="prose mx-auto max-w-[50em] pb-8"><section data-type="chapter" id="section-forces">
<h1 id="chapter-2-forces">Розділ 2. Сили</h1>
<div class="chapter-opening-quote">
  <blockquote data-type="epigraph">
    <p>Не варто недооцінювати Силу.</p>
    <div class="chapter-opening-quote-source">
      <p>— Дарт Вейдер</p>
    </div>
  </blockquote>
</div>
<p></p>
<div class="chapter-opening-figure">
  <figure>
    <div data-gatsby-image-wrapper="" class="gatsby-image-wrapper gatsby-image-wrapper-constrained"><div style="max-width:2000px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg height=&#x27;1125&#x27; width=&#x27;2000&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:#181818;position:absolute;top:0;left:0;bottom:0;right:0"></div><picture><source type="image/webp" data-srcset="./static/008727839dd772b2b3f58525d3298c3b/cd07d/02_forces_1.webp 500w,./static/008727839dd772b2b3f58525d3298c3b/bf95e/02_forces_1.webp 1000w,./static/008727839dd772b2b3f58525d3298c3b/d36eb/02_forces_1.webp 2000w" sizes="(min-width: 2000px) 2000px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 2000px) 2000px, 100vw" decoding="async" loading="lazy" data-src="./static/008727839dd772b2b3f58525d3298c3b/00054/02_forces_1.png" data-srcset="./static/008727839dd772b2b3f58525d3298c3b/86bab/02_forces_1.png 500w,./static/008727839dd772b2b3f58525d3298c3b/8cf60/02_forces_1.png 1000w,./static/008727839dd772b2b3f58525d3298c3b/00054/02_forces_1.png 2000w" alt="Сузір’я Олександра Колдера (фото Езри Столлера)"/></picture><noscript><picture><source type="image/webp" srcSet="./static/008727839dd772b2b3f58525d3298c3b/cd07d/02_forces_1.webp 500w,./static/008727839dd772b2b3f58525d3298c3b/bf95e/02_forces_1.webp 1000w,./static/008727839dd772b2b3f58525d3298c3b/d36eb/02_forces_1.webp 2000w" sizes="(min-width: 2000px) 2000px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 2000px) 2000px, 100vw" decoding="async" loading="lazy" src="./static/008727839dd772b2b3f58525d3298c3b/00054/02_forces_1.png" srcSet="./static/008727839dd772b2b3f58525d3298c3b/86bab/02_forces_1.png 500w,./static/008727839dd772b2b3f58525d3298c3b/8cf60/02_forces_1.png 1000w,./static/008727839dd772b2b3f58525d3298c3b/00054/02_forces_1.png 2000w" alt="Сузір’я Олександра Колдера (фото Езри Столлера)"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div>
    <figcaption></figcaption>
  </figure>
  <span id="calder-installation-at-the-new-gallery-charles-hayden-memorial-library-mit-cambridge-ma-1950-photo-by-ezra-stoller"><a class="heading-link" href="#calder-installation-at-the-new-gallery-charles-hayden-memorial-library-mit-cambridge-ma-1950-photo-by-ezra-stoller">Сузір’я Олександра Колдера (фото Езри Столлера)</a></span>
  <p>Олександр Колдер був американським митцем 20-го століття, відомим своїми кінетичними скульптурами, які врівноважують форму і рух. Його “сузір’я” були скульптурами, що складалися з взаємопов’язаних форм і дроту, які демонстрували напругу, рівновагу та постійне гравітаційне тяжіння.</p>
<hr/></div>
<p>У фінальному прикладі Розділу 1 я продемонстрував, як обчислити динамічне прискорення на основі вектора, що вказує від кульки на полотні до положення курсора. Отриманий рух нагадував магнітне притягання між фігурою і курсором, ніби якась <em>сила</em> тягнула кульку до курсора. У цьому розділі я детально розповім про концепцію сили та її зв’язок із прискоренням. Метою цього розділу буде створення простого фізичного рушія та пояснення того, як об’єкти рухаються на полотні, реагуючи на різні сили середовища.</p>
<p><strong>Фізичний рушій</strong> — це комп’ютерна програма (або бібліотека коду), яка моделює поведінку об’єктів у фізичному середовищі. У програмі p5.js об’єкти — це 2D форми, а середовище — прямокутне полотно. Фізичні рушії можуть бути розроблені для високої точності (вимагають високопродуктивних обчислень) або реального часу (з використанням простих і швидких алгоритмів). У цьому розділі зосереджено увагу на створенні елементарного фізичного рушія з фокусом на його швидкість та простоту.</p>
<h2 id="forces-and-newtons-laws-of-motion"><a class="heading-link" href="#forces-and-newtons-laws-of-motion">Сили й закони руху Ньютона</a></h2>
<p>Почнімо з концептуального погляду на те, що означає сила в реальному світі. Як і слово <em>вектор</em>, термін <em>сила</em> може мати різноманітні значення. Він може вказувати на потужну фізичну інтенсивність, як у фразі “Вони штовхали валун із великою силою”, або на потужний вплив, як у вислові “Вони — сила, з якою необхідно рахуватися!” Визначення <strong>сили</strong>, яке мене цікавить для цього розділу, більш формальне і походить від трьох законів руху сера Ісаака Ньютона:</p>
<p><span class="callout highlight">Сила — це вектор, який впливає на прискорення об’єкта з масою.</span></p>
<p>Сподіваюся, ви розпізнали першу частину визначення: <em>сила — це вектор</em>. Добре, що ви щойно пройшли цілий розділ, вивчаючи, що таке вектори і як з ними програмувати! Тепер я продовжу з пояснення, як три закони руху Ньютона пов’язані з тим, що ви вже знаєте про вектори, і по ходу розповіді побудую сцену для решти визначень сили.</p>
<h3 id="newtons-first-law"><a class="heading-link" href="#newtons-first-law">Перший закон Ньютона</a></h3>
<p>Перший закон Ньютона зазвичай формулюється так:</p>
<p><span class="callout highlight">Об’єкт, що перебуває у спокої, залишається у стані спокою, а об’єкт, що рухається, залишається у русі.</span></p>
<p>Однак тут відсутній важливий елемент, пов’язаний із силами. Я можу розширити це визначення, заявивши:</p>
<p><span class="callout highlight">Об’єкт у стані спокою залишається у спокої, а об’єкт у стані руху залишається у русі з постійною швидкістю і напрямком, якщо на нього не діє незбалансована сила.</span></p>
<p>До появи Ньютона, панівній теорії руху, сформульованій Арістотелем, було майже 2000 років. Вона стве рджувала, що якщо об’єкт рухається, для його подальшого руху потрібна якась сила. Якщо цю рухому річ не підштовхувати або не тягнути, вона сповільниться або зупиниться. Ця теорія була підтверджена шляхом спостереження за світом. Наприклад, якщо ви кинете м’яч, він впаде на землю і зрештою зупиниться, оскільки сила поштовху більше не діятиме на нього.</p>
<p>Ця старіша теорія, звісно ж, не відповідає дійсності. Як встановив Ньютон, за відсутності будь-яких сил, щоб підтримувати рух тіла не потрібна сила. Коли об’єкт (наприклад, вищезгаданий м’яч) підкидається в земній атмосфері, його швидкість змінюється через невидимі сили, такі як опір повітря і гравітація. Швидкість об’єкта залишатиметься постійною лише за відсутності будь-яких сил або якщо сили, які діють на нього, компенсують одна одну, тобто сумарна сила дорівнюватиме нулю. Це часто називається <strong>рівновагою</strong> (див. малюнок 2.1). М’яч, що падає, досягне кінцевої швидкості (яка залишатиметься постійною), коли сила опору повітря дорівнюватиме силі тяжіння.</p>
<figure>
  <div data-gatsby-image-wrapper="" class="gatsby-image-wrapper gatsby-image-wrapper-constrained"><div style="max-width:2304px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg height=&#x27;798&#x27; width=&#x27;2304&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:#f8f8f8;position:absolute;top:0;left:0;bottom:0;right:0"></div><picture><source type="image/webp" data-srcset="./static/a18732c4bf14691a770c6f1e3762c02a/68681/02_forces_2.webp 576w,./static/a18732c4bf14691a770c6f1e3762c02a/81828/02_forces_2.webp 1152w,./static/a18732c4bf14691a770c6f1e3762c02a/5f600/02_forces_2.webp 2304w" sizes="(min-width: 2304px) 2304px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 2304px) 2304px, 100vw" decoding="async" loading="lazy" data-src="./static/a18732c4bf14691a770c6f1e3762c02a/ef435/02_forces_2.png" data-srcset="./static/a18732c4bf14691a770c6f1e3762c02a/d4ec3/02_forces_2.png 576w,./static/a18732c4bf14691a770c6f1e3762c02a/15a5d/02_forces_2.png 1152w,./static/a18732c4bf14691a770c6f1e3762c02a/ef435/02_forces_2.png 2304w" alt="Малюнок 2.1: Іграшкова мишка не рухається, тому що всі сили компенсують одна одну (тобто сумарна сила дорівнює нулю)"/></picture><noscript><picture><source type="image/webp" srcSet="./static/a18732c4bf14691a770c6f1e3762c02a/68681/02_forces_2.webp 576w,./static/a18732c4bf14691a770c6f1e3762c02a/81828/02_forces_2.webp 1152w,./static/a18732c4bf14691a770c6f1e3762c02a/5f600/02_forces_2.webp 2304w" sizes="(min-width: 2304px) 2304px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 2304px) 2304px, 100vw" decoding="async" loading="lazy" src="./static/a18732c4bf14691a770c6f1e3762c02a/ef435/02_forces_2.png" srcSet="./static/a18732c4bf14691a770c6f1e3762c02a/d4ec3/02_forces_2.png 576w,./static/a18732c4bf14691a770c6f1e3762c02a/15a5d/02_forces_2.png 1152w,./static/a18732c4bf14691a770c6f1e3762c02a/ef435/02_forces_2.png 2304w" alt="Малюнок 2.1: Іграшкова мишка не рухається, тому що всі сили компенсують одна одну (тобто сумарна сила дорівнює нулю)"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div>
  <figcaption>Малюнок 2.1: Іграшкова мишка не рухається, тому що всі сили компенсують одна одну (тобто сумарна сила дорівнює нулю)</figcaption>
</figure>
<p>З урахуванням полотна p5.js я можу переформулювати перший закон Ньютона наступним чином:</p>
<p><span class="callout highlight">Вектор швидкості об’єкта залишатиметься постійним, якщо він перебуває у стані рівноваги.</span></p>
<p>Іншими словами, у класі <code>Mover</code> функція <code>update()</code> не повинна застосовувати жодні математичні операції до вектора швидкості, якщо немає якоїсь сумарної сили, відмінної від нуля.</p>
<h3 id="newtons-third-law"><a class="heading-link" href="#newtons-third-law">Третій закон Ньютона</a></h3>
<p>Дозвольте мені на мить відкласти другий закон Ньютона (мабуть, найважливіший закон для цілей цієї книги) і перейти до його третього закону. Цей закон часто формулюється так:</p>
<p><span class="callout highlight">На кожну дію є рівна протидія.</span></p>
<p>Спосіб формулювання цього закону часто викликає плутанину. З одного боку, це звучить так, ніби одна сила викликає іншу. Наче, якщо ви штовхаєте когось, то цей хтось може <em>активно</em> вирішити штовхнути вас назад. Але третій закон Ньютона має на увазі не цю дію і реакцію.</p>
<p>Скажімо, ви штовхаєте стіну. Стіна не вирішує активно відштовхувати вас назад, але все ж чинить опір з рівною силою у протилежному напрямку. У стіни немає власного “джерела” сили. Ваш тиск просто включає обидві сили, які називаються <em>парою дії/протидії</em>. Кращим способом формулювання третього закону Ньютона може бути наступне:</p>
<p><span class="callout highlight">Сили завжди виникають парами. Обидві сили мають однакову міць, але протилежні напрямки.</span></p>
<p>Це все ще викликає плутанину, оскільки звучить так, ніби ці сили завжди нівелюють одна одну. Це не той випадок. Пам’ятайте, що сили діють на різні об’єкти. І просто тому, що обидві сили рівні, це не означає, що рухи об’єктів однакові (або що об’єкти перестануть рухатися).</p>
<p>Розглянемо штовхання нерухомої вантажівки. Попри те, що вантажівка набагато масивніша за вас, у нерухомому стані вона ніколи не здолає вас і не змусить відлетіти назад. Сила, з якою ваші руки діють на вантажівку, рівна і протилежна силі, з якою вантажівка діє на ваші руки. Результат залежить від низки інших факторів. Якщо вантажівка невелика і припаркована на зледенілій поверхні, ви, ймовірно, зможете змусити її рухатися. З іншого боку, якщо це дуже велика вантажівка на ґрунтовій дорозі, то штовхнувши її досить сильно (можливо, навіть з розбігу), можна ушкодити свою руку.</p>
<p>А що, якщо під час поштовху вантажівки ви будете на роликах, як показано на малюнку 2.2?</p>
<figure>
  <div data-gatsby-image-wrapper="" class="gatsby-image-wrapper gatsby-image-wrapper-constrained"><div style="max-width:2301px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg height=&#x27;1156&#x27; width=&#x27;2301&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:#f8f8f8;position:absolute;top:0;left:0;bottom:0;right:0"></div><picture><source type="image/webp" data-srcset="./static/c8404e7340216f8888c9da99115c6718/29253/02_forces_3.webp 575w,./static/c8404e7340216f8888c9da99115c6718/de6fe/02_forces_3.webp 1151w,./static/c8404e7340216f8888c9da99115c6718/2c729/02_forces_3.webp 2301w" sizes="(min-width: 2301px) 2301px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 2301px) 2301px, 100vw" decoding="async" loading="lazy" data-src="./static/c8404e7340216f8888c9da99115c6718/aa03a/02_forces_3.png" data-srcset="./static/c8404e7340216f8888c9da99115c6718/28b97/02_forces_3.png 575w,./static/c8404e7340216f8888c9da99115c6718/4342c/02_forces_3.png 1151w,./static/c8404e7340216f8888c9da99115c6718/aa03a/02_forces_3.png 2301w" alt="Малюнок 2.2: Демонстрація третього закону руху Ньютона шляхом штовхання важкої вантажівки на роликових ковзанах"/></picture><noscript><picture><source type="image/webp" srcSet="./static/c8404e7340216f8888c9da99115c6718/29253/02_forces_3.webp 575w,./static/c8404e7340216f8888c9da99115c6718/de6fe/02_forces_3.webp 1151w,./static/c8404e7340216f8888c9da99115c6718/2c729/02_forces_3.webp 2301w" sizes="(min-width: 2301px) 2301px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 2301px) 2301px, 100vw" decoding="async" loading="lazy" src="./static/c8404e7340216f8888c9da99115c6718/aa03a/02_forces_3.png" srcSet="./static/c8404e7340216f8888c9da99115c6718/28b97/02_forces_3.png 575w,./static/c8404e7340216f8888c9da99115c6718/4342c/02_forces_3.png 1151w,./static/c8404e7340216f8888c9da99115c6718/aa03a/02_forces_3.png 2301w" alt="Малюнок 2.2: Демонстрація третього закону руху Ньютона шляхом штовхання важкої вантажівки на роликових ковзанах"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div>
  <figcaption>Малюнок 2.2: Демонстрація третього закону руху Ньютона у вигляді штовхання важкої вантажівки на роликах</figcaption>
</figure>
<div class="avoid-break">
  <p>Ви рухатиметеся від вантажівки, ковзаючи по дорозі, поки вантажівка залишатиметься на місці. Чому ви ковзаєте, а не вантажівка? По-перше, вантажівка має набагато більшу масу (про це я розповім за допомогою другого закону Ньютона). Тут також діють й інші сили, зокрема тертя об дорогу шин вантажівки та ваших роликів.</p>
</div>
<p>Знову, враховуючи p5.js, я міг би переформулювати третій закон Ньютона наступним чином:</p>
<p><span class="callout highlight">Якщо ви обчислюєте <code>p5.Vector</code> під назвою <code>f</code>, який представляє дію сили об’єкта <span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal">A</span></span></span></span></span> на об’єкт <span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi></mrow><annotation encoding="application/x-tex">B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.05017em">B</span></span></span></span></span>, ви також повинні застосувати протилежну силу, з якою об’єкт <span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi></mrow><annotation encoding="application/x-tex">B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.05017em">B</span></span></span></span></span> діє на об’єкт <span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal">A</span></span></span></span></span>. Ви можете обчислити цю іншу силу як <code>p5.Vector.mult(f, -1)</code>.</span></p>
<p>Невдовзі ви побачите, що у світі програмування симуляцій часто не обов’язково дотримуватися третього закону Ньютона. Іноді, наприклад, у випадку гравітац ійного притягання між тілами (див. приклад 2.8), я захочу моделювати рівні й протилежні сили. В інших випадках, наприклад, у сценарії де я скажу: “Гей, тут дмухає вітер”, я не збираюся моделювати зворотну силу, з якою тіло діятиме на повітря. Насправді я взагалі не буду моделювати повітря! Пам’ятайте, що приклади в цій книзі надихаються фізикою природного світу з метою творчості та інтерактивності. Вони не вимагають ідеальної точності.</p>
<h3 id="newtons-second-law"><a class="heading-link" href="#newtons-second-law">Другий закон Ньютона</a></h3>
<p>Настав час для найважливішого закону для кодерів на p5.js: другого закону Ньютона. Він формулюється наступним чином:</p>
<p><span class="callout highlight">Сила дорівнює масі, помноженій на прискорення.</span></p>
<p>Або:</p>
<div data-type="equation" class="math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mover accent="true"><mi>F</mi><mo>⃗</mo></mover><mo>=</mo><mi>M</mi><mo>×</mo><mover accent="true"><mi>A</mi><mo>⃗</mo></mover></mrow><annotation encoding="application/x-tex">\vec{F} = M \times \vec{A}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9663em"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9663em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord mathnormal" style="margin-right:0.13889em">F</span></span><span style="top:-3.2523em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-0.1522em"><span class="overlay" style="height:0.714em;width:0.471em"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z"></path></svg></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em"></span><span class="mord mathnormal" style="margin-right:0.10903em">M</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.9663em"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9663em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord mathnormal">A</span></span><span style="top:-3.2523em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-0.0966em"><span class="overlay" style="height:0.714em;width:0.471em"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z"></path></svg></span></span></span></span></span></span></span></span></span></span></span></div>
<p>Чому це найважливіший закон для цієї книги? Що ж, запишемо це рівняння по-іншому:</p>
<div data-type="equation" class="math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mover accent="true"><mi>A</mi><mo>⃗</mo></mover><mo>=</mo><mover accent="true"><mi>F</mi><mo>⃗</mo></mover><mi mathvariant="normal">/</mi><mi>M</mi></mrow><annotation encoding="application/x-tex">\vec{A} = \vec{F} / M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9663em"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9663em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord mathnormal">A</span></span><span style="top:-3.2523em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-0.0966em"><span class="overlay" style="height:0.714em;width:0.471em"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z"></path></svg></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.2163em;vertical-align:-0.25em"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9663em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord mathnormal" style="margin-right:0.13889em">F</span></span><span style="top:-3.2523em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-0.1522em"><span class="overlay" style="height:0.714em;width:0.471em"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z"></path></svg></span></span></span></span></span></span></span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:0.10903em">M</span></span></span></span></span></div>
<p>Прискорення прямо пропорційно силі й обернено пропорційно масі. Подумайте, що це означає, якщо вас штовхнути? Чим сильніше поштовх, тим швидше буде збільшення або зменшення вашої швидкості (прискорення). З іншого боку, чим ви більші, тим менш ефективна сила для вашого прискорення!</p>
<div data-type="note" class="callout">
  <h3 id="weight-vs-mass"><a class="heading-link" href="#weight-vs-mass">Вага проти маси</a></h3>
  <p>Масу не слід плутати з вагою. <strong>Маса</strong> є мірою кількості речовини в об’єкті (вимірюється в кілограмах). Об’єкт з масою 1-го кілограма на Землі матиме масу 1-го кілограма на Місяці.</p>
  <p><strong>Вага</strong>, яку часто плутають з масою, технічно є силою тяжіння, що діє на об’єкт. Згідно з другим законом Ньютона, ви можете обчислити вагу як масу, помножену на прискорення вільного падіння (<span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi><mo>=</mo><mi>m</mi><mo>×</mo><mi>g</mi></mrow><annotation encoding="application/x-tex">w = m \times g</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal" style="margin-right:0.02691em">w</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em"></span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin"> ×</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em"></span><span class="mord mathnormal" style="margin-right:0.03588em">g</span></span></span></span></span>). Вага вимірюється в ньютонах, одиниці, яка вимірює величину сили тяжіння. Оскільки вага пов’язана з гравітацією, об’єкт на Місяці важить на одну шосту менше, ніж на Землі.</p>
  <p>З масою пов’язане поняття <strong>густини</strong>, яке визначається як кількість маси на одиницю об’єму (наприклад, грам на кубічний сантиметр).</p>
</div>
<p>Що таке маса у світі p5.js? Хіба ми не маємо справу з пікселями? Почнімо з простого і скажемо, що в уявному піксельному світі всі об’єкти мають масу рівну 1. Будь-що, поділене на 1 дорівнює самому собі, отже, у цьому простому світі ми маємо наступне:</p>
<div data-type="equation" class="math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mover accent="true"><mi>A</mi><mo>⃗</mo></mover><mo>=</mo><mover accent="true"><mi>F</mi><mo>⃗</mo></mover></mrow><annotation encoding="application/x-tex">\vec{A} = \vec{F}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9663em"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9663em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord mathnormal">A</span></span><span style="top:-3.2523em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-0.0966em"><span class="overlay" style="height:0.714em;width:0.471em"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z"></path></svg></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.9663em"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9663em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord mathnormal" style="margin-right:0.13889em">F</span></span><span style="top:-3.2523em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-0.1522em"><span class="overlay" style="height:0.714em;width:0.471em"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z"></path></svg></span></span></span></span></span></span></span></span></span></span></span></div>
<p>Я фактично виключив масу з рівняння, зробивши прискорення об’єкта рівним силі. Це чудова новина. Зрештою, у <a href="/vectors#section-vectors">Розділі 1</a> я описав прискорення як ключ до керування рухом об’єктів на полотні. Я сказав, що положення змінюється відповідно до швидкості, а швидкість — відповідно до прискорення. Здається, що прискорення — це те, з чого все починається. Тепер ви бачите, що насправді саме <em>сила</em> — це те, з чого все починається.</p>
<p>Візьмімо клас <code>Mover</code>, з позицією, швидкістю і прискоренням:</p>
<div class="codesplit callout not-prose" data-code-language="javascript"><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Mover</span> {
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">    <span class="hljs-variable language_">this</span>.<span class="hljs-property">position</span> = <span class="hljs-title function_">createVector</span>();
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">    <span class="hljs-variable language_">this</span>.<span class="hljs-property">velocity</span> = <span class="hljs-title function_">createVector</span>();
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">    <span class="hljs-variable language_">this</span>.<span class="hljs-property">acceleration</span> = <span class="hljs-title function_">createVector</span>();
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  }
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">}
</code></pre><div class="comment"><p></p></div></div></div>
<p>Тепер потрібно отримати можливість додавати сили до цього об’єкта за допомогою подібного коду:</p>
<div class="codesplit callout not-prose" data-code-language="javascript"><div class="pair"><pre><code class="hljs code language-javascript">mover.<span class="hljs-title function_">applyForce</span>(wind);
</code></pre><div class="comment"><p></p></div></div></div>
<p>Або ось так:</p>
<div class="codesplit callout not-prose" data-code-language="javascript"><div class="pair"><pre><code class="hljs code language-javascript">mover.<span class="hljs-title function_">applyForce</span>(gravity);
</code></pre><div class="comment"><p></p></div></div></div>
<p>Тут <code>wind</code> і <code>gravity</code> — це об&#x27;єкти типу <code>p5.Vector</code>. Згідно з другим законом Ньютона, я міг би реалізувати цей метод <code>applyForce()</code> наступним чином:</p>
<div class="codesplit callout not-prose" data-code-language="javascript"><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-title function_">applyForce</span>(<span class="hljs-params">force</span>) {
</code></pre><div class="comment"><p></p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">  <span class="hljs-variable language_">this</span>.<span class="hljs-property">acceleration</span> = force;
</code></pre><div class="comment"><p>Другий закон Ньютона у його найпростішому вигляді.</p></div></div><div class="pair"><pre><code class="hljs code language-javascript">}
</code></pre><div class="comment"><p></p></div></div></div>
<p>Виглядає досить добре. Зрештою, <em>прискорення = сила</em> — це буквальний переклад другого закону Ньютона (у світі без маси). Проте, цей код має досить велику проблему, з якою я швидко зіткнуся, коли повернусь до своєї початкової мети: створення об’єкта, який реагує на силу вітру і гравітації. Розгляньте цей код:</p>
<div class="codesplit callout not-prose" data-code-language="javascript"><div class="pair"><pre><code class="hljs code language-javascript">mover.<span class="hljs-title function_">applyForce</span>(wind);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">mover.<span class="hljs-title function_">applyForce</span>(gravity);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">mover.<span class="hljs-title function_">update</span>();
</code></pre><div class="comment"><p></p></div></div></div>
<p>Уявіть на мить, що ви комп’ютер. Спершу ви викликаєте метод <code>applyForce()</code> з параметром <code>wind</code> і тепер прискорення об&#x27;єкта <code>Mover</code> присвоює значення вектора <code>wind</code>. Потім ви викликаєте метод <code>applyForce()</code> з  параметром <code>gravity</code>. Тепер прискорення об&#x27;єкта <code>Mover</code> встановлено вектором <code>gravity</code>. Нарешті, ви викликаєте метод <code>update()</code>. Що відбувається у <code>update()</code>? Прискорення додається до швидкості:</p>
<div class="codesplit callout not-prose" data-code-language="javascript"><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-variable language_">this</span>.<span class="hljs-property">velocity</span>.<span class="hljs-title function_">add</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">acceleration</span>);
</code></pre><div class="comment"><p></p></div></div></div>
<p>Якщо ви запустите цей код, то не побачите помилку в консолі, але бзиньк! Маємо серйозну проблему. Яке значення має <code>прискорення</code>, коли його додають до <code>швидкості</code>? Воно дорівнює вектору <code>gravity</code>, а значення <code>wind</code> було випущено! Кожного разу, коли викликається метод <code>applyForce()</code>, значення <code>прискорення</code> перезаписується. Як же мені впоратися з більш ніж однією силою?</p>
<h2 id="force-accumulation"><a class="heading-link" href="#force-accumulation">Акумуляція сил</a></h2>
<p>Відповідь полягає в тому, що сили повинні <strong>акумулюватися</strong> або додаватися разом. Це зазначено в повному визначенні другого закону Ньютона, яке мушу визнати, я спростив. Ось більш точне формулювання:</p>
<p><span class="callout highlight">Сукупна сила дорівнює масі, помноженій на прискорення.</span></p>
<p>Іншими словами, прискорення дорівнює <em>сумі всіх сил</em>, поділеній на масу. У будь-який момент на об’єкт може діяти 1, 2, 6, 12 або 303 сили. Поки об’єкт знає, як їх додавати разом (акумулювати), не має значення, скільки саме цих сил. Загальна сума дасть вам прискорення об’єкта (знову ж таки, ігноруючи масу). Це цілком логічно. Зрештою, як ви бачили в першому законі Ньютона, якщо всі сили, що діють на об’єкт, у сумі дорівнюють нулю, об’єкт перебуває у стані рівноваги (тобто немає прискорення).</p>
<p>Тепер я можу переглянути метод <code>applyForce()</code>, щоб врахувати у ньому накопичення сил:</p>
<div class="codesplit callout not-prose" data-code-language="javascript"><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-title function_">applyForce</span>(<span class="hljs-params">force</span>) {
</code></pre><div class="comment"><p></p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">  <span class="hljs-variable language_">this</span>.<span class="hljs-property">acceleration</span>.<span class="hljs-title function_">add</span>(force);
</code></pre><div class="comment"><p>Другий закон Ньютона, але з акумуляцією сил через додавання усіх вхідних значень.</p></div></div><div class="pair"><pre><code class="hljs code language-javascript">}
</code></pre><div class="comment"><p></p></div></div></div>
<p>Але я ще не закінчив. Накопичення сил має ще одну частину. Оскільки я додаю всі сили разом у будь-який момент, я повинен переконатися, що очищаю <code>прискорення</code> (встановлюю його на <code>0</code>) перед кожним викликом методу <code>update()</code>. Подумайте на мить про силу вітру. Іноді вітер дуже сильний, іноді слабкий, а іноді його зовсім немає. Наприклад, ви можете написати код, який створює порив вітру при утриманні кнопки:</p>
<div class="codesplit callout not-prose" data-code-language="javascript"><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">if</span> (mouseIsPressed) {
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  <span class="hljs-keyword">let</span> wind = <span class="hljs-title function_">createVector</span>(<span class="hljs-number">0.5</span>, <span class="hljs-number">0</span>);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  mover.<span class="hljs-title function_">applyForce</span>(wind);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">}
</code></pre><div class="comment"><p></p></div></div></div>
<p>Коли кнопка відпускається, вітер має припинитися і, згідно з першим законом Ньютона, об&#x27;єкт має продовжити рухатися з постійною швидкістю. Однак, якщо я забуду скинути <code>прискорення</code> до <code>0</code>, порив вітру все ще буде діяти. Навіть гірше, він додасться з попереднього кадру! Прискорення у фізичній симуляції на основі часу не має пам’яті, воно обчислюється на основі сил навколишнього середовища, присутніх у будь-який момент (кадр) часу. Це відрізняється від, скажімо, положення. Об&#x27;єкт повинен пам&#x27;ятати своє попереднє розташування, щоб правильно переміститися до наступного.</p>
<p>Один із способів очистити прискорення для кожного кадру — це помножити вектор <code>прискорення</code> на <code>0</code> у кінці функції <code>update()</code>:</p>
<div class="codesplit callout not-prose" data-code-language="javascript"><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-title function_">update</span>(<span class="hljs-params"></span>) {
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  <span class="hljs-variable language_">this</span>.<span class="hljs-property">velocity</span>.<span class="hljs-title function_">add</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">acceleration</span>);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  <span class="hljs-variable language_">this</span>.<span class="hljs-property">position</span>.<span class="hljs-title function_">add</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">velocity</span>);
</code></pre><div class="comment"><p></p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">  <span class="hljs-variable language_">this</span>.<span class="hljs-property">acceleration</span>.<span class="hljs-title function_">mult</span>(<span class="hljs-number">0</span>);
</code></pre><div class="comment"><p>Очищення прискорення після його застосування.</p></div></div><div class="pair"><pre><code class="hljs code language-javascript">}
</code></pre><div class="comment"><p></p></div></div></div>
<p>Можливість акумулювати та застосовувати сили наближає мене до робочого фізичного рушія, але тут я маю відзначити ще одну деталь, яку я замовчував, окрім маси. Це <strong>крок часу</strong> — частота оновлення симуляції. Розмір кроку часу впливає на точність і поведінку симуляції, тому багато фізичних рушіїв включають крок часу як змінну (часто позначається як <code>dt</code>, що означає <em>delta time</em> (дельта часу) або <em>зміна у часі</em>). Для спрощення я вирішив вважати, що кожен цикл функції <code>draw()</code> представляє один крок часу. Це припущення може бути не найточнішим, але воно дозволяє мені зосередитися на ключових принципах симуляції.</p>
<p>Я залишу це припущення до Розділу 6, коли я розгляну вплив різних кроків часу, описуючи сторонні фізичні бібліотеки. Однак зараз я можу і повинен взятися за величезного слона в кімнаті, якого досі ігнорував — масу:</p>
<div data-type="exercise" class="callout">
  <h3 id="exercise-21"><a class="heading-link" href="#exercise-21">Вправа 2.1</a></h3>
  <p>За допомогою сил, імітуйте повітряну кульку, наповнену гелієм, що пливе вгору і відскакує від поверхні полотна. Чи зможете ви додати силу вітру, яка змінюється з часом, можливо, залежну від шуму Перліна?</p>
</div>
<h2 id="factoring-in-mass"><a class="heading-link" href="#factoring-in-mass">Фактор маси</a></h2>
<p>Другий закон Ньютона це насправді <span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mi>F</mi><mo>⃗</mo></mover><mo>=</mo><mi>M</mi><mo>×</mo><mover accent="true"><mi>A</mi><mo>⃗</mo></mover></mrow><annotation encoding="application/x-tex">\vec{F} = M \times \vec{A}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9663em"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9663em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord mathnormal" style="margin-right:0.13889em">F</span></span><span style="top:-3.2523em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-0.1522em"><span class="overlay" style="height:0.714em;width:0.471em"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z"></path></svg></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em"></span><span class="mord mathnormal" style="margin-right:0.10903em">M</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.9663em"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9663em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord mathnormal">A</span></span><span style="top:-3.2523em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-0.0966em"><span class="overlay" style="height:0.714em;width:0.471em"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z"></path></svg></span></span></span></span></span></span></span></span></span></span></span>, а не <span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mi>F</mi><mo>⃗</mo></mover><mo>=</mo><mover accent="true"><mi>A</mi><mo>⃗</mo></mover></mrow><annotation encoding="application/x-tex">\vec{F} = \vec{A}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9663em"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9663em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord mathnormal" style="margin-right:0.13889em">F</span></span><span style="top:-3.2523em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-0.1522em"><span class="overlay" style="height:0.714em;width:0.471em"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z"></path></svg></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.9663em"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9663em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord mathnormal">A</span></span><span style="top:-3.2523em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-0.0966em"><span class="overlay" style="height:0.714em;width:0.471em"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z"></path></svg></span></span></span></span></span></span></span></span></span></span></span>. Як можна врахувати масу у симуляції? Для початку це так само просто, як додати властивість <code>this.mass</code> до екземпляра класу <code>Mover</code>, але мені треба приділити цьому питанню трохи більше часу через інше неминуче ускладнення.</p>
<p>Але спочатку я додам масу:</p>
<div class="codesplit callout not-prose" data-code-language="javascript"><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Mover</span> {
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">    <span class="hljs-variable language_">this</span>.<span class="hljs-property">position</span> = <span class="hljs-title function_">createVector</span>();
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">    <span class="hljs-variable language_">this</span>.<span class="hljs-property">velocity</span> = <span class="hljs-title function_">createVector</span>();
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">    <span class="hljs-variable language_">this</span>.<span class="hljs-property">acceleration</span> = <span class="hljs-title function_">createVector</span>();
</code></pre><div class="comment"><p></p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">    <span class="hljs-variable language_">this</span>.<span class="hljs-property">mass</span> = ????;
</code></pre><div class="comment"><p>Додавання маси у вигляді числа.</p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  }
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">}
</code></pre><div class="comment"><p></p></div></div></div>
<div data-type="note" class="callout">
  <h3 id="units-of-measurement"><a class="heading-link" href="#units-of-measurement">Одиниці вимірювання</a></h3>
  <p>Зараз, коли я вводжу масу, важливо коротко згадати одиниці вимірювання. У реальному світі речі вимірюються в конкретних одиницях: два об’єкти розташовані на відстані 3-х метрів один від одного, бейсбольний м’яч рухається зі швидкістю 90 миль на годину, або цей м’яч для боулінгу має масу 6 кілограмів. Іноді ви хочете взяти до уваги одиниці вимірювання реального світу. Однак у цьому розділі я буду дотримуватися піксельних одиниць вимірювання (“Ці два кола віддалені на відстані 100 пікселів”) і кадрів анімації, як кроків часу (“Це коло рухається зі швидкістю 2 пікселі на кадр”).</p>
  <p>У випадку маси не існує відповідної цифрової одиниці вимірювання. Яку масу має будь-який піксель? Ви можете насолоджуватися вигадуванням власних одиниць маси для p5.js, таких як “10 пікселоїдів” або “10 юрклів”.</p>
  <p>Для демонстрації я прив’яжу масу до пікселів (чим більший діаметр кола, тим більша маса). Це дозволить мені візуалізувати масу об’єкта, хоча й неточно. У реальному світі розмір не вказує на масу. Маленька металева кулька може мати набагато більшу масу, ніж велика повітряна куля, через свою більшу густину. Зауважу, що для круглих об’єктів маса повинна бути прив’язаною до формули площі круга: <span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>π</mi><msup><mi>r</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">\pi r^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em"></span><span class="mord mathnormal" style="margin-right:0.03588em">π</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em">r</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span>. (Це буде розглянуто у вправі 2.11, а ще більше я розповім про <span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>π</mi></mrow><annotation encoding="application/x-tex">\pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal" style="margin-right:0.03588em">π</span></span></span></span></span> та круги у <a href="/oscillation#section-oscillation">Розділі 3</a>.)</p>
</div>
<p>Маса є скалярною величиною, а не вектором, оскільки це лише одне число, яке описує кількість речовини в об’єкті. Я міг би обчислювати площу фігури як її масу, але простіше почати, сказавши: “Агов, маса цього об’єкта дорівнює… гм, ну я знаю… як щодо 10?”</p>
<div class="codesplit callout not-prose" data-code-language="javascript"><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  <span class="hljs-variable language_">this</span>.<span class="hljs-property">position</span> = <span class="hljs-title function_">createVector</span>(<span class="hljs-title function_">random</span>(width), <span class="hljs-title function_">random</span>(height));
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  <span class="hljs-variable language_">this</span>.<span class="hljs-property">velocity</span> = <span class="hljs-title function_">createVector</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  <span class="hljs-variable language_">this</span>.<span class="hljs-property">acceleration</span> = <span class="hljs-title function_">createVector</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  <span class="hljs-variable language_">this</span>.<span class="hljs-property">mass</span> = <span class="hljs-number">10</span>;
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">}
</code></pre><div class="comment"><p></p></div></div></div>
<p>Це поки не настільки добре, оскільки все стає цікавим лише тоді, коли я маю об’єкти з різною масою, але цього достатньо, щоб почати. Де залучити масу? Мені потрібно поділити силу на масу, щоб застосувати до об’єкта другий закон Ньютона:</p>
<div class="codesplit callout not-prose" data-code-language="javascript"><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-title function_">applyForce</span>(<span class="hljs-params">force</span>) {
</code></pre><div class="comment"><p></p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">  force.<span class="hljs-title function_">div</span>(mass);
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">acceleration</span>.<span class="hljs-title function_">add</span>(force);
</code></pre><div class="comment"><p>Другий закон Ньютона (з акумуляцією сил та масою).</p></div></div><div class="pair"><pre><code class="hljs code language-javascript">}
</code></pre><div class="comment"><p></p></div></div></div>
<p>Знову ж таки, хоч код виглядає досить розумним, він має серйозну проблему. Розглянемо наступний сценарій із двома об’єктами типу <code>Mover</code>, що рухаються під дією сили вітру:</p>
<div class="codesplit callout not-prose" data-code-language="javascript"><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">let</span> moverA = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Mover</span>();
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">let</span> moverB = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Mover</span>();
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">let</span> wind = <span class="hljs-title function_">createVector</span>(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">moverA.<span class="hljs-title function_">applyForce</span>(wind);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">moverB.<span class="hljs-title function_">applyForce</span>(wind);
</code></pre><div class="comment"><p></p></div></div></div>
<p>Знову уявіть, що ви комп’ютер. Об’єкт <code>moverA</code> отримує силу вітру <span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mn>1</mn><mo separator="true">,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(1, 0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">(</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord">0</span><span class="mclose">)</span></span></span></span></span> й ділить її на <code>mass</code> зі значенням 10 та додає до прискорення:</p>
<table><thead><tr><th>Дія</th><th>Векторні компоненти</th></tr></thead><tbody><tr><td><code>moverA</code> приймає силу вітру.</td><td><span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mn>1</mn><mo separator="true">,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(1, 0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">(</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord">0</span><span class="mclose">)</span></span></span></span></span></td></tr><tr><td><code>moverA</code> ділить силу вітру на масу 10.</td><td><span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mn>0.1</mn><mo separator="true">,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(0.1, 0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">(</span><span class="mord">0.1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord">0</span><span class="mclose">)</span></span></span></span></span></td></tr></tbody></table>
<p>Тепер ви переходите до об’єкта <code>moverB</code>. Він також отримує силу вітру <span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mn>1</mn><mo separator="true">,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(1, 0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">(</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord">0</span><span class="mclose">)</span></span></span></span></span>. Зачекайте, одну секунду. Яке значення сили вітру? Придивившись ближче, зараз воно дорівнює <span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mn>0.1</mn><mo separator="true">,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(0.1, 0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">(</span><span class="mord">0.1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord">0</span><span class="mclose">)</span></span></span></span></span>! Пам’ятайте, що коли ви передаєте об’єкт (у цьому випадку <code>p5.Vector</code>) у функцію, ви передаєте посилання на цей об’єкт. Це не копія! Отже, якщо функція вносить зміни у цей об’єкт (що в цьому випадку вона робить шляхом ділення на масу), цей об’єкт змінюється назавжди. Але я не хочу, щоб <code>moverB</code> отримував силу, поділену на масу об’єкта <code>moverA</code>. Я хочу, щоб він отримав силу в її початковому стані — <span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mn>1</mn><mo separator="true">,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(1, 0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">(</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord">0</span><span class="mclose">)</span></span></span></span></span>. Тому мені потрібно захистити оригінальний вектор і зробити його копію перед діленням на масу.</p>
<p>На щаст я, клас <code>p5.Vector</code> має зручний метод для створення копії — <code>copy()</code>. Він повертає новий об’єкт <code>p5.Vector</code> з тими самими даними. Тож я можу переглянути метод <code>applyForce()</code> наступним чином:</p>
<div class="codesplit callout not-prose" data-code-language="javascript"><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-title function_">applyForce</span>(<span class="hljs-params">force</span>) {
</code></pre><div class="comment"><p></p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">  <span class="hljs-keyword">let</span> f = force.<span class="hljs-title function_">copy</span>();
</code></pre><div class="comment"><p>Створення копії вектора перед його використанням.</p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">  f.<span class="hljs-title function_">div</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">mass</span>);
</code></pre><div class="comment"><p>Розділення на масу копії вектора.</p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  <span class="hljs-variable language_">this</span>.<span class="hljs-property">acceleration</span>.<span class="hljs-title function_">add</span>(f);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">}
</code></pre><div class="comment"><p></p></div></div></div>
<p>Давайте на мить підсумуємо те, що я вже розглянув. Я визначив, що таке сила (вектор), і показав, як застосовувати силу до об’єкта (поділити її на масу та додати до вектора прискорення об’єкта). Чог о не вистачає? Що ж, мені ще належить зрозуміти, як розраховувати силу. Звідки беруться сили?</p>
<div data-type="exercise" class="callout">
  <h3 id="exercise-22"><a class="heading-link" href="#exercise-22">Вправа 2.2</a></h3>
  <p>Ви можете написати метод <code>applyForce()</code> іншим способом, використовуючи статичний метод <code>div()</code> замість <code>copy()</code>. Перепишіть <code>applyForce()</code> за допомогою статичного методу. Для допомоги у цій вправі, перегляньте <a href="/vectors#static-vs-nonstatic-methods" class="page-reference">“Статичні та нестатичні методи”</a>.</p>
  <div class="codesplit callout not-prose" data-code-language="javascript"><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-title function_">applyForce</span>(<span class="hljs-params">force</span>) {
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  <span class="hljs-keyword">let</span> f = p5.<span class="hljs-property">Vector</span>.<span class="hljs-title function_">div</span>(force, <span class="hljs-variable language_">this</span>.<span class="hljs-property">mass</span>);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  <span class="hljs-variable language_">this</span>.<span class="hljs-property">acceleration</span>.<span class="hljs-title function_">add</span>(f);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">}
</code></pre><div class="comment"><p></p></div></div></div>
</div>
<h2 id="creating-forces"><a class="heading-link" href="#creating-forces">Створення сил</a></h2>
<p>Ця частина розділу пропонує два способи для створення сил у світі p5.js:</p>
<ul>
  <li><strong>Вигадайте силу!</strong> Зрештою, ви програміст, творець свого світу. Немає причин, чому ви не можете просто вигадати силу і застосувати її.</li>
  <li><strong>Змоделюйте силу!</strong> Сили існують у фізичному світі й підручники з фізики часто містять формули для цих сил. Ви можете взяти ці формули й перекласти їх у вихідний код для моделювання реальних сил у JavaScript.</li>
</ul>
<p>Для початку я сфокусуюся на першому підході. Найпростіший спосіб створити силу — просто вибрати число або два числа. Почнемо з ідеї симуляції вітру. Як щодо сили вітру, спрямовану праворуч і досить слабку? З об’єктом <code>mover</code>, код буде наступним:</p>
<div class="codesplit callout not-prose" data-code-language="javascript"><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">let</span> wind = <span class="hljs-title function_">createVector</span>(<span class="hljs-number">0.01</span>, <span class="hljs-number">0</span>);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">mover.<span class="hljs-title function_">applyForce</span>(wind);
</code></pre><div class="comment"><p></p></div></div></div>
<p>Результат не надто цікавий, але хороший для початку. Я створюю об’єкт <code>p5.Vector</code>, ініціалізую його та передаю в об’єкт <code>Mover</code> (який, своєю чергою, застосує його до власного прискорення). Щоб завершити цей приклад, я додам ще одну силу, гравітацію (спрямовану вниз), і включатиму силу вітру, лише при натиснутій кнопці мишки.</p>
<div data-type="example">
  <h3 id="example-21-forces"><a class="heading-link" href="#example-21-forces">Приклад 2.1: Сили</a></h3>
  <figure>
    <div class="not-prose clear-both my-4 overflow-hidden rounded border bg-gray-100" style="max-width:1152px"><div class="relative overflow-hidden rounded-t bg-white"><!-- <div class="absolute left-[50%] top-[50%] -translate-x-[50%] -translate-y-[50%] ">Loading sketch ...</div> --><iframe class="w-full border-none transition-opacity opacity-1000" style="aspect-ratio:2.667" loading="lazy" src="./examples/02_forces/example_2_1_forces"></iframe></div><div class="flex items-center justify-between border-t"><div class="flex"><button class="flex items-center border-r px-2.5 py-1.5 text-sm hover:bg-gray-200"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" aria-hidden="true" class="h-[15px] w-[15px]" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg><span class="ml-1.5">Reset</span></button><button class="flex items-center border-r px-2.5 py-1.5 text-sm hover:bg-gray-200"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" aria-hidden="true" class="h-4 w-4" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" d="M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span class="ml-1">Pause</span></button></div><a href="https://editor.p5js.org/natureofcode/sketches/4IRI8BEVE" target="_blank" rel="noreferrer" class="flex items-center px-2.5 text-[0.8rem] hover:underline">Open in Web Editor<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" class="ml-1 text-gray-500" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></a></div></div>
    <figcaption>Клацання кнопкою мишки застосовує силу вітру.</figcaption>
  </figure>
</div>
<div class="codesplit callout not-prose" data-code-language="javascript"><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">let</span> gravity = <span class="hljs-title function_">createVector</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0.1</span>);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">mover.<span class="hljs-title function_">applyForce</span>(gravity);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">if</span> (mouseIsPressed) {
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  <span class="hljs-keyword">let</span> wind = <span class="hljs-title function_">createVector</span>(<span class="hljs-number">0.1</span>, <span class="hljs-number">0</span>);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  mover.<span class="hljs-title function_">applyForce</span>(wind);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">}
</code></pre><div class="comment"><p></p></div></div></div>
<p>Тепер я маю дві сили, спрямовані в різні боки й з різною магнітудою, обидві застосовані до об’єкта <code>mover</code>. Я починаю підходити до певних результатів. Я побудував світ, середовище з силами, які діють на предмети!</p>
<p>Подивимося, що станеться, коли я додам другий об’єкт з іншою масою. Щоб зробити це, вам, можливо, захочеться коротко пригадати ООП. Знову ж таки, я не розглядаю тут усі основи програмування (для цього ви можете переглянути будь-які вступні книги з p5.js або відеоуроки, перелічені у <a href="/introduction#the-coding-train-connection" class="page-reference">“вступі”</a>). Однак, оскільки ідея створення світу наповненого об’єктами є фундаментальною для всіх прикладів цієї книги, варто приділити хвилинку, щоб здолати певні кроки від використання одного об’єкта до багатьох.</p>
<p>Ось як зараз виглядає клас <code>Mover</code>. Зверніть увагу, наскільки він ідентичний класу <code>Mover</code>, створеному в Розділі 1, з двома доповненнями: властивістю <code>mass</code> і новим методом <code>applyForce()</code>:</p>
<div class="codesplit callout not-prose" data-code-language="javascript"><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Mover</span> {
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {
</code></pre><div class="comment"><p></p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">    <span class="hljs-variable language_">this</span>.<span class="hljs-property">mass</span> = <span class="hljs-number">1</span>;
</code></pre><div class="comment"><p>Наразі для простоти встановимо масу рівною 1.</p></div></div><div class="pair"><pre><code class="hljs code language-javascript">    <span class="hljs-variable language_">this</span>.<span class="hljs-property">position</span> = <span class="hljs-title function_">createVector</span>(width / <span class="hljs-number">2</span>, <span class="hljs-number">30</span>);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">    <span class="hljs-variable language_">this</span>.<span class="hljs-property">velocity</span> = <span class="hljs-title function_">createVector</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">    <span class="hljs-variable language_">this</span>.<span class="hljs-property">acceleration</span> = <span class="hljs-title function_">createVector</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  }
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">
</code></pre><div class="comment"><p></p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">  <span class="hljs-title function_">applyForce</span>(<span class="hljs-params">force</span>) {
</code></pre><div class="comment"><p>Другий закон Ньютона.</p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">    <span class="hljs-keyword">let</span> f = p5.<span class="hljs-property">Vector</span>.<span class="hljs-title function_">div</span>(force, <span class="hljs-variable language_">this</span>.<span class="hljs-property">mass</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">acceleration</span>.<span class="hljs-title function_">add</span>(f);
</code></pre><div class="comment"><p>Отримаємо силу, поділимо її на масу і додамо до прискорення.</p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  }
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  <span class="hljs-title function_">update</span>(<span class="hljs-params"></span>) {
</code></pre><div class="comment"><p></p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">    <span class="hljs-variable language_">this</span>.<span class="hljs-property">velocity</span>.<span class="hljs-title function_">add</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">acceleration</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">position</span>.<span class="hljs-title function_">add</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">velocity</span>);
</code></pre><div class="comment"><p>Базовий рух з Розділу 1.</p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">    <span class="hljs-variable language_">this</span>.<span class="hljs-property">acceleration</span>.<span class="hljs-title function_">mult</span>(<span class="hljs-number">0</span>);
</code></pre><div class="comment"><p>Очищення прискорення після його застосування.</p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  }
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  <span class="hljs-title function_">show</span>(<span class="hljs-params"></span>) {
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">    <span class="hljs-title function_">stroke</span>(<span class="hljs-number">0</span>);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">    <span class="hljs-title function_">fill</span>(<span class="hljs-number">175</span>);
</code></pre><div class="comment"><p></p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">    <span class="hljs-title function_">circle</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">position</span>.<span class="hljs-property">x</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">position</span>.<span class="hljs-property">y</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">mass</span> * <span class="hljs-number">16</span>);
</code></pre><div class="comment"><p>Масштабування розміру кругу відповідно до маси. Ми ще удосконалимо цей момент!</p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  }
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">
</code></pre><div class="comment"><p></p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">  <span class="hljs-title function_">checkEdges</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">position</span>.<span class="hljs-property">x</span> &gt; width) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">position</span>.<span class="hljs-property">x</span> = width;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">velocity</span>.<span class="hljs-property">x</span> *= -<span class="hljs-number">1</span>;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">position</span>.<span class="hljs-property">x</span> &lt; <span class="hljs-number">0</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">velocity</span>.<span class="hljs-property">x</span> *= -<span class="hljs-number">1</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">position</span>.<span class="hljs-property">x</span> = <span class="hljs-number">0</span>;
    }
</code></pre><div class="comment"><p>Я також вирішив додати код, щоб об’єкт відскакував від країв полотна.</p></div></div><div class="pair"><pre><code class="hljs code language-javascript">
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">position</span>.<span class="hljs-property">y</span> &gt; height) {
</code></pre><div class="comment"><p></p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">      <span class="hljs-variable language_">this</span>.<span class="hljs-property">velocity</span>.<span class="hljs-property">y</span> *= -<span class="hljs-number">1</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">position</span>.<span class="hljs-property">y</span> = height;
</code></pre><div class="comment"><p>Хоча я казав про бажання не змінювати напряму значення положення і швидкості, можливі винятки. Тут я роблю це як швидкий спосіб змінити напрямок руху об’єкта, коли він досягає краю.</p></div></div><div class="pair"><pre><code class="hljs code language-javascript">    }
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  }
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">}
</code></pre><div class="comment"><p></p></div></div></div>
<div class="avoid-break">
  <p>Тепер, коли клас написаний, я можу створювати більше одного об’єкта типу <code>Mover</code>:</p>
  <div class="codesplit callout not-prose" data-code-language="javascript"><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">let</span> moverA = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Mover</span>();
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">let</span> moverB = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Mover</span>();
</code></pre><div class="comment"><p></p></div></div></div>
</div>
<p>Але є проблема. Подивіться ще раз на конструктор об’єкта <code>Mover</code>:</p>
<div class="codesplit callout not-prose" data-code-language="javascript"><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {
</code></pre><div class="comment"><p></p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">  <span class="hljs-variable language_">this</span>.<span class="hljs-property">mass</span> = <span class="hljs-number">1</span>;
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">position</span> = <span class="hljs-title function_">createVector</span>(width / <span class="hljs-number">2</span>, <span class="hljs-number">30</span>);
</code></pre><div class="comment"><p>Кожен об’єкт має масу 1 і стале положення (width / 2, 30).</p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  <span class="hljs-variable language_">this</span>.<span class="hljs-property">velocity</span> = <span class="hljs-title function_">createVector</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  <span class="hljs-variable language_">this</span>.<span class="hljs-property">acceleration</span> = <span class="hljs-title function_">createVector</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">}
</code></pre><div class="comment"><p></p></div></div></div>
<p>Наразі кожен об’єкт <code>Mover</code> створюється з однаковими даними. Я хочу мати можливість створювати об’єкти <code>Mover</code> зі <em>змінними</em> значеннями маси й положення. Хороший спосіб зробити це за допомогою аргументів конструктора:</p>
<div class="codesplit callout not-prose" data-code-language="javascript"><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-title function_">constructor</span>(<span class="hljs-params">x, y, mass</span>) {
</code></pre><div class="comment"><p></p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">  <span class="hljs-variable language_">this</span>.<span class="hljs-property">mass</span> = mass;
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">position</span> = <span class="hljs-title function_">createVector</span>(x, y);
</code></pre><div class="comment"><p>Тепер присвоїмо значення із аргументів.</p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  <span class="hljs-variable language_">this</span>.<span class="hljs-property">velocity</span> = <span class="hljs-title function_">createVector</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  <span class="hljs-variable language_">this</span>.<span class="hljs-property">acceleration</span> = <span class="hljs-title function_">createVector</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">}
</code></pre><div class="comment"><p></p></div></div></div>
<p>Зверніть увагу, що маса та положення більше не встановлюються жорстко закодованими числами, а ініціалізуються через аргументи <code>x</code>, <code>y</code> і <code>mass</code>, що передані конструктору. Це означає, що я можу створювати різні об’єкти типу <code>Mover</code> — великі, маленькі, ті, що починаються з лівого боку полотна, або такі, що починають ся праворуч і будь-де між ними:</p>
<div class="codesplit callout not-prose" data-code-language="javascript"><div class="pair split"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">let</span> moverA = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Mover</span>(<span class="hljs-number">100</span>, <span class="hljs-number">30</span>, <span class="hljs-number">10</span>);
</code></pre><div class="comment"><p>Великий об’єкт на лівій стороні полотна.</p></div></div><div class="pair split"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">let</span> moverB = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Mover</span>(<span class="hljs-number">400</span>, <span class="hljs-number">30</span>, <span class="hljs-number">2</span>);
</code></pre><div class="comment"><p>Менший об’єкт на правій стороні полотна.</p></div></div></div>
<p>Я міг вибрати ініціалізацію значень різними способами (випадковим чином, шумом Перліна, методом сітки тощо). Тут я просто вибрав кілька чисел для демонстраційних цілей. У цій книзі я ще покажу інші методи ініціалізації для симуляції.</p>
<p>Після того, як об’єкти оголошені й ініціалізовані, решта коду слідує як і раніше. Для кожного об’єкта передайте сили, щоб засовувати їх через <code>applyForce()</code> і насолоджуйтеся шоу!</p>
<div data-type="example">
  <h3 id="example-22-forces-acting-on-two-objects"><a class="heading-link" href="#example-22-forces-acting-on-two-objects">Приклад 2.2: Сили, що діють на два об’єкти</a></h3>
  <figure>
    <div class="not-prose clear-both my-4 overflow-hidden rounded border bg-gray-100" style="max-width:1152px"><div class="relative overflow-hidden rounded-t bg-white"><!-- <div class="absolute left-[50%] top-[50%] -translate-x-[50%] -translate-y-[50%] ">Loading sketch ...</div> --><iframe class="w-full border-none transition-opacity opacity-1000" style="aspect-ratio:2.667" loading="lazy" src="./examples/02_forces/example_2_2_forces_acting_on_two_objects"></iframe></div><div class="flex items-center justify-between border-t"><div class="flex"><button class="flex items-center border-r px-2.5 py-1.5 text-sm hover:bg-gray-200"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" aria-hidden="true" class="h-[15px] w-[15px]" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg><span class="ml-1.5">Reset</span></button><button class="flex items-center border-r px-2.5 py-1.5 text-sm hover:bg-gray-200"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" aria-hidden="true" class="h-4 w-4" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" d="M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span class="ml-1">Pause</span></button></div><a href="https://editor.p5js.org/natureofcode/sketches/ePLfo-OGu" target="_blank" rel="noreferrer" class="flex items-center px-2.5 text-[0.8rem] hover:underline">Open in Web Editor<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" class="ml-1 text-gray-500" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></a></div></div>
    <figcaption>Клацання  кнопкою мишки застосовує силу вітру.</figcaption>
  </figure>
</div>
<div class="codesplit callout not-prose" data-code-language="javascript"><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">draw</span>(<span class="hljs-params"></span>) {
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  <span class="hljs-title function_">background</span>(<span class="hljs-number">255</span>);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">
</code></pre><div class="comment"><p></p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">  <span class="hljs-keyword">let</span> gravity = <span class="hljs-title function_">createVector</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0.1</span>);
  moverA.<span class="hljs-title function_">applyForce</span>(gravity);
  moverB.<span class="hljs-title function_">applyForce</span>(gravity);
</code></pre><div class="comment"><p>Вигадайте і створіть певну силу тяжіння та застосуйте її.</p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">  <span class="hljs-keyword">if</span> (mouseIsPressed) {
    <span class="hljs-keyword">let</span> wind = <span class="hljs-title function_">createVector</span>(<span class="hljs-number">0.1</span>, <span class="hljs-number">0</span>);
    moverA.<span class="hljs-title function_">applyForce</span>(wind);
    moverB.<span class="hljs-title function_">applyForce</span>(wind);
  }
</code></pre><div class="comment"><p>Вигадайте і створіть певну силу вітру та застосовуйте її при клацанні мишки.</p></div></div><div class="pair"><pre><code class="hljs code language-javascript">
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  moverA.<span class="hljs-title function_">checkEdges</span>();
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  moverA.<span class="hljs-title function_">update</span>();
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  moverA.<span class="hljs-title function_">show</span>();
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  moverB.<span class="hljs-title function_">checkEdges</span>();
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  moverB.<span class="hljs-title function_">update</span>();
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  moverB.<span class="hljs-title function_">show</span>();
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">}
</code></pre><div class="comment"><p></p></div></div></div>
<p>Зверніть увагу, що кожна операція в коді записана двічі, один раз для <code>moverA</code> і один раз для <code>moverB</code>. На практиці, для управління кількома об’єктами, масив буде більш доречним вибором, ніж окремі змінні, особливо коли їх кількість зростає. Таким чином мені доведеться написати кожну операцію лише один раз і використати цикл, щоб застосувати її до кожного об’єкт а <code>Mover</code> у масиві. Я продемонструю це пізніше, а масиви детальніше розгляну у Розділі 4.</p>
<div data-type="exercise" class="callout">
  <h3 id="exercise-23"><a class="heading-link" href="#exercise-23">Вправа 2.3</a></h3>
  <p>Замість того, щоб об’єкти відбивалися від краю полотна, створіть приклад, у якому невидима сила відштовхуватиме об’єкти назад, щоб утримати їх у межах вікна. Чи можете ви врахувати величину для сили в залежності від того, наскільки далеко об’єкт знаходиться від краю, так що чим ближче він до нього, тим більшою буде сила?</p>
</div>
<div data-type="exercise" class="callout">
  <h3 id="exercise-24"><a class="heading-link" href="#exercise-24">Вправа 2.4</a></h3>
  <p>Змініть відбивання кульки від стінок полотна так, щоб вона змінювала напрямок, коли торкається до межі своїм краєм, а не центром, як це відбувається зараз.</p>
</div>
<div data-type="exercise" class="callout">
  <h3 id="exercise-25"><a class="heading-link" href="#exercise-25">Вправа 2.5</a></h3>
  <p>Створіть мінливу силу вітру. Чи можете ви зробити її інтерактивною? Наприклад, подумайте про подобу вентилятора, розташованого у положенні курсора мишки й спрямованого у напрямку до кульок.</p>
</div>
<p>При запуску прикладу 2.2, зверніть увагу, що мале коло реагує на прикладену дію акумульованих сил відчутніше,  ніж велике. Це пояснюється формулою: <em>прискорення = сила, поділена на масу</em>. Маса знаходиться у знаменнику, тому чим вона більше, тим менше прискорення. Це має сенс для сили вітру — чим масивніший об’єкт, тим вітру важче його штовхати, — але чи це підходить для симуляції гравітаційного тяжіння Землі?</p>
<p>Якби ви піднялися на вершину Пізанської вежі й впустили з неї дві кулі різної маси, яка з них першою вдарилася б об землю? Згідно з легендою, Галілей провів саме цей експеримент у 1589 році, виявивши, що вони падали з однаковим прискоренням, вдарившись об землю одночасно. Чому? Незабаром я розповім про це глибше, але швидка відповідь полягає в тому, що сила тяжіння обчислюється відносно маси об’єкта, тож чим більший об’єкт, тим дужча сила, але ця сила нівелюється, коли ділиться на масу, щоб визначити прискорення. Отже, прискорення сили тяжіння для різних об’єктів однакове.</p>
<p>Швидке виправлення програми — те, що наближає її на крок до більш реалістичного моделювання сили, а не простого її вигадування — полягає у помноженні сили тяжіння на масу.</p>
<div data-type="example">
  <h3 id="example-23-gravity-scaled-by-mass"><a class="heading-link" href="#example-23-gravity-scaled-by-mass">Приклад 2.3: Гравітація, масштабована за масою</a></h3>
  <figure>
    <div class="not-prose clear-both my-4 overflow-hidden rounded border bg-gray-100" style="max-width:1152px"><div class="relative overflow-hidden rounded-t bg-white"><!-- <div class="absolute left-[50%] top-[50%] -translate-x-[50%] -translate-y-[50%] ">Loading sketch ...</div> --><iframe class="w-full border-none transition-opacity opacity-1000" style="aspect-ratio:2.667" loading="lazy" src="./examples/02_forces/example_2_3_gravity_scaled_by_mass"></iframe></div><div class="flex items-center justify-between border-t"><div class="flex"><button class="flex items-center border-r px-2.5 py-1.5 text-sm hover:bg-gray-200"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" aria-hidden="true" class="h-[15px] w-[15px]" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg><span class="ml-1.5">Reset</span></button><button class="flex items-center border-r px-2.5 py-1.5 text-sm hover:bg-gray-200"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" aria-hidden="true" class="h-4 w-4" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" d="M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span class="ml-1">Pause</span></button></div><a href="https://editor.p5js.org/natureofcode/sketches/0RiwMFOQ7" target="_blank" rel="noreferrer" class="flex items-center px-2.5 text-[0.8rem] hover:underline">Open in Web Editor<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" class="ml-1 text-gray-500" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></a></div></div>
    <figcaption>Клацання кнопкою мишки застосовує силу вітру.</figcaption>
  </figure>
</div>
<div class="codesplit callout not-prose" data-code-language="javascript"><div class="pair split"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">let</span> gravity = <span class="hljs-title function_">createVector</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0.1</span>);
</code></pre><div class="comment"><p>Створення сили тяжіння.</p></div></div><div class="pair split"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">let</span> gravityA = p5.<span class="hljs-property">Vector</span>.<span class="hljs-title function_">mult</span>(gravity, moverA.<span class="hljs-property">mass</span>);
moverA.<span class="hljs-title function_">applyForce</span>(gravityA);
</code></pre><div class="comment"><p>Масштабування сили тяжіння на основі маси об’єкта moverA.</p></div></div><div class="pair split"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">let</span> gravityB = p5.<span class="hljs-property">Vector</span>.<span class="hljs-title function_">mult</span>(gravity, moverB.<span class="hljs-property">mass</span>);
moverB.<span class="hljs-title function_">applyForce</span>(gravityB);
</code></pre><div class="comment"><p>Масштабування сили тяжіння на основі маси об’єкта moverB.</p></div></div></div>
<p>Тепер об’єкти падають з однаковою швидкістю. Я все ще обчислюю силу тяжіння, довільно встановивши для неї значення 0.1, але, масштабуючи силу відповідно до маси об’єкта, я обчислюю її у спосіб, який трохи точніше ві дповідає фактичній силі гравітаційного тяжіння Землі. Тим часом оскільки сила вітру не залежить від маси, коли кнопка мишки натиснута, менше коло все одно прискорюється праворуч швидше. (Онлайн-код для цього прикладу також містить рішення вправи 2.4 із доданою змінною <code>radius</code> у класі <code>Mover</code>.)</p>
<h2 id="modeling-a-force"><a class="heading-link" href="#modeling-a-force">Моделювання сили</a></h2>
<p>Вигадування сил може завести досить далеко і я щойно створив досить хороше наближення земної гравітації. Зрештою, світ p5.js — це оркестр пікселів, а ви — диригент, тому можете визначати як силу будь-що, що вважаєте за потрібне! Проте, може настати час, коли вам стане цікаво: “А як це все <em>насправді</em> працює?” Ось коли на сцену виходить моделювання сил, а не просто їх вигадування.</p>
<div data-type="note" class="callout">
  <h3 id="parsing-formulas"><a class="heading-link" href="#parsing-formulas">Розбір формул</a></h3>
  <p>За мить я збираюся написати формулу для тертя. Це вже не перший раз, коли ви бачите формулу в цій книзі і я щойно закінчив обговорення другого закону Ньютона: <span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mi>F</mi><mo>⃗</mo></mover><mo>=</mo><mi>M</mi><mo>×</mo><mover accent="true"><mi>A</mi><mo>⃗</mo></mover></mrow><annotation encoding="application/x-tex">\vec{F} = M \times \vec{A}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9663em"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9663em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord mathnormal" style="margin-right:0.13889em">F</span></span><span style="top:-3.2523em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-0.1522em"><span class="overlay" style="height:0.714em;width:0.471em"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z"></path></svg></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em"></span><span class="mord mathnormal" style="margin-right:0.10903em">M</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.9663em"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9663em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord mathnormal">A</span></span><span style="top:-3.2523em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-0.0966em"><span class="overlay" style="height:0.714em;width:0.471em"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z"></path></svg></span></span></span></span></span></span></span></span></span></span></span> (сила дорівнює масі, помноженій на прискорення). Сподіваюся, ви не довго хвилювались щодо цієї формули, оскільки це всього лише кілька символів і знаків. Проте, у цьому світі велика кількість термінів і символів. Просто подивіться на рівняння нормального розподілу, про який я говорив раніше, не розглядаючи саму його формулу, у <a href="/random#a-normal-distribution-of-random-numbers" class="page-reference">“Нормальному розподілі випадкових чисел”</a>:</p>
  <div data-type="equation" class="math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mfrac><mn>1</mn><mrow><mi>σ</mi><msqrt><mrow><mn>2</mn><mi>π</mi></mrow></msqrt></mrow></mfrac><msup><mi>e</mi><mrow><mo>−</mo><mfrac><mrow><mo stretchy="false">(</mo><mi>x</mi><mo>−</mo><mi>μ</mi><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow><mrow><mn>2</mn><msup><mi>σ</mi><mn>2</mn></msup></mrow></mfrac></mrow></msup></mrow><annotation encoding="application/x-tex">\frac{1}{\sigma\sqrt{2\pi}}e^{-\frac{(x-\mu)^2}{2\sigma^2}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.2591em;vertical-align:-0.93em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em"><span style="top:-2.2028em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">σ</span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9072em"><span class="svg-align" style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord" style="padding-left:0.833em"><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.03588em">π</span></span></span><span style="top:-2.8672em"><span class="pstrut" style="height:3em"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"></path></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1328em"><span></span></span></span></span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.93em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.3291em"><span style="top:-3.4534em;margin-right:0.05em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.251em"><span style="top:-2.5062em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em">σ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9384em"><span style="top:-2.9384em;margin-right:0.1em"><span class="pstrut" style="height:2.6444em"></span><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-3.2255em"><span class="pstrut" style="height:3em"></span><span class="frac-line mtight" style="border-bottom-width:0.049em"></span></span><span style="top:-3.5021em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">x</span><span class="mbin mtight">−</span><span class="mord mathnormal mtight">μ</span><span class="mclose mtight"><span class="mclose mtight">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.0484em"><span style="top:-3.0484em;margin-right:0.1em"><span class="pstrut" style="height:2.6444em"></span><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4938em"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span></span></span></span></span></span></span></span></span></span></span></span></div>
  <p>Формули часто записуються з багатьма символами, часто з літерами грецького алфавіту. Ось формула для тертя (позначена через <span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mi>f</mi><mo>⃗</mo></mover></mrow><annotation encoding="application/x-tex">\vec{f}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1719em;vertical-align:-0.1944em"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9774em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span></span><span style="top:-3.2634em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-0.0688em"><span class="overlay" style="height:0.714em;width:0.471em"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z"></path></svg></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em"><span></span></span></span></span></span></span></span></span></span>):</p>
  <div data-type="equation" class="math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mover accent="true"><mi>f</mi><mo>⃗</mo></mover><mo>=</mo><mo>−</mo><mi>μ</mi><mi>N</mi><mover accent="true"><mi>v</mi><mo>^</mo></mover></mrow><annotation encoding="application/x-tex">\vec{f} = -\mu N \hat{v}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1719em;vertical-align:-0.1944em"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9774em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span></span><span style="top:-3.2634em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-0.0688em"><span class="overlay" style="height:0.714em;width:0.471em"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z"></path></svg></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord">−</span><span class="mord mathnormal">μ</span><span class="mord mathnormal" style="margin-right:0.10903em">N</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6944em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord mathnormal" style="margin-right:0.03588em">v</span></span><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-0.2222em"><span class="mord">^</span></span></span></span></span></span></span></span></span></span></span></div>
  <p>Якщо вам давно не траплялись формули з підручників математики чи фізики, то перш ніж я продовжу, важливо розглянути три ключові моменти:</p>
  <ul>
    <li><strong>Обчисліть праву сторону та призначте результат лівій стороні.</strong> Це як у коді! У наведеному вище випадку ліва сторона представляє те, що я хочу обчислити — силу тертя, а права сторона пояснює, як це зробити.</li>
    <li><strong>Мова йде про вектор чи скаляр?</strong> Важливо розуміти, що в деяких випадках ви будете обчислювати вектор, а в інших — скаляр. Наприклад, у цьому випадку сила тертя є вектором. Він позначений стрілкою над символом <span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi></mrow><annotation encoding="application/x-tex">f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span></span></span></span></span>. Він має магнітуду і напрямок. У правій частині рівняння також є вектор, позначений символом <span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mi>v</mi><mo>^</mo></mover></mrow><annotation encoding="application/x-tex">\hat{v}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6944em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord mathnormal" style="margin-right:0.03588em">v</span></span><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-0.2222em"><span class="mord">^</span></span></span></span></span></span></span></span></span></span></span>, який у цьому випадку означає одиничний вектор швидкості.</li>
    <li><strong>Коли символи розташовані поруч один з одним, це зазвичай означає їх перемноження.</strong> Права частина формули тертя містить чотири елементи: <span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo></mrow><annotation encoding="application/x-tex">-</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em"></span><span class="mord">−</span></span></span></span></span>, <span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>μ</mi></mrow><annotation encoding="application/x-tex">μ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em"></span><span class="mord mathnormal">μ</span></span></span></span></span>, <span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.10903em">N</span></span></span></span></span> і <span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mi>v</mi><mo>^</mo></mover></mrow><annotation encoding="application/x-tex">\hat{v}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6944em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord mathnormal" style="margin-right:0.03588em">v</span></span><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-0.2222em"><span class="mord">^</span></span></span></span></span></span></span></span></span></span></span>. Їх слід перемножити, читаючи формулу як: <span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mi>f</mi><mo>⃗</mo></mover><mo>=</mo><mo>−</mo><mn>1</mn><mo>×</mo><mi>μ</mi><mo>×</mo><mi>N</mi><mo>×</mo><mover accent="true"><mi>v</mi><mo>^</mo></mover></mrow><annotation encoding="application/x-tex">\vec{f} = -1 \times \mu \times N \times \hat{v}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1719em;vertical-align:-0.1944em"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9774em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord mathnormal" style="margin-right:0.10764em">f</span></span><span style="top:-3.2634em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-0.0688em"><span class="overlay" style="height:0.714em;width:0.471em"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z"></path></svg></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em"></span><span class="mord">−</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.1944em"></span><span class="mord mathnormal">μ</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em"></span><span class="mord mathnormal" style="margin-right:0.10903em">N</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6944em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord mathnormal" style="margin-right:0.03588em">v</span></span><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-0.2222em"><span class="mord">^</span></span></span></span></span></span></span></span></span></span></span>.</li>
  </ul>
</div>
<div class="avoid-break">
  <p>Відкрийте будь-який підручник з фізики середньої школи й ви знайдете діаграми та формули, які описують різні сили — гравітацію, електромагнетизм, тертя, натяг, пружність тощо. У решті цього розділу я збираюся розглянути три сили — тертя, опір і гравітаційне тяжіння — й покажу, як їх змоделювати за допомогою p5.js. Суть не в тому, що це фундаментальні сили, які завжди потрібні у ваших симуляціях. Скоріше я хочу продемонструвати ці сили як приклади для:</p>
  <ol>
    <li>Розуміння концепції сили</li>
    <li>Розбору формули сили на дві частини:
      <ol>
        <li>Як обчислити напрямок сили?</li>
        <li>Як обчислити величину сили?</li>
      </ol>
    </li>
    <li>Переведення цієї формули у код p5.js, який обчислює вектор для його передачі у метод <code>applyForce()</code> об’єкта <code>Mover</code></li>
  </ol>
</div>
<p>Якщо, на наведених далі прикладах з силами, ви зможете опанувати ці кроки та зловите себе при гуглінні запитів о третій годині ранку типу “<em>слабкої взаємодії атомних ядер</em>” то, сподіваюсь, матимете достатні навички, щоб в зяти знайдене та адаптувати це в межах p5.js.</p>
<h3 id="friction"><a class="heading-link" href="#friction">Тертя</a></h3>
<p>Почнемо з тертя і пройдемося вищезазначеними кроками. Щоразу, коли дві поверхні стикаються, між ними відбувається <strong>тертя</strong>. Тертя є <strong>дисипативною силою</strong>, тобто вона приводить до перетворення кінетичної енергії об’єкта в іншу форму, створюючи враження втрати або дисипації (розсіювання).</p>
<p>Припустимо, що ви керуєте автомобілем. Коли ви натискаєте ногою на гальмо автомобіля, його гальма використовують тертя об покришки, щоб сповільнити рух коліс. Кінетична енергія (рух) перетворюється на теплову енергію (тепло). Повна модель тертя включатиме окремі випадки статичного тертя (тертя спокою, тобто без руху) і кінетичного тертя (тертя ковзання, цебто з рухом), але для спрощення я розглядатиму тут лише кінетичний випадок. На малюнку 2.3 зображена формула для тертя.</p>
<p>Оскільки тертя є вектором, дозвольте мені розкласти цю формулу на дві складові, які визначають напрямок тертя, а також його магнітуду. Малюнок 2.3 показує, що <em>тертя спрямоване в протилежному напрямку від швидкості</em>. Фактично, це та частина формули, яка говорить: <span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><mn>1</mn><mo>×</mo><mover accent="true"><mi>v</mi><mo>^</mo></mover></mrow><annotation encoding="application/x-tex">-1 \times \hat{v}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em"></span><span class="mord">−</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6944em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord mathnormal" style="margin-right:0.03588em">v</span></span><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-0.2222em"><span class="mord">^</span></span></span></span></span></span></span></span></span></span></span>, або мінус один помножити на одиничний вектор швидкості. У p5.js це означало б взяти вектор об’єкта <code>velocity</code> і помножити його на <code>-1</code>:</p>
<div class="codesplit callout not-prose" data-code-language="javascript"><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">let</span> friction = <span class="hljs-variable language_">this</span>.<span class="hljs-property">velocity</span>.<span class="hljs-title function_">copy</span>();
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">friction.<span class="hljs-title function_">normalize</span>();
</code></pre><div class="comment"><p></p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">friction.<span class="hljs-title function_">mult</span>(-<span class="hljs-number">1</span>);
</code></pre><div class="comment"><p>Визначимо напрямок сили тертя
(одиничний вектор у напрямку протилежному швидкості).</p></div></div></div>
<p>Зверніть увагу на два додаткові кроки. По-перше, важливо зробити копію вектора <code>velocity</code>, оскільки я не хочу випадково змінити напрямок об’єкта. По-друге, вектор нормалізується. Це тому, що величина тертя не пов’язана зі швидкістю об’єкта, і я хочу почати з вектора довжиною у 1, щоб його можна було легко масштабувати.</p>
<figure>
  <div data-gatsby-image-wrapper="" class="gatsby-image-wrapper gatsby-image-wrapper-constrained"><div style="max-width:2304px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg height=&#x27;1305&#x27; width=&#x27;2304&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:#f8f8f8;position:absolute;top:0;left:0;bottom:0;right:0"></div><picture><source type="image/webp" data-srcset="./static/dd34ffadda4093e094eb5762e0fb8aec/cf44c/02_forces_4.webp 576w,./static/dd34ffadda4093e094eb5762e0fb8aec/fec7d/02_forces_4.webp 1152w,./static/dd34ffadda4093e094eb5762e0fb8aec/fbdf6/02_forces_4.webp 2304w" sizes="(min-width: 2304px) 2304px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 2304px) 2304px, 100vw" decoding="async" loading="lazy" data-src="./static/dd34ffadda4093e094eb5762e0fb8aec/7cff1/02_forces_4.png" data-srcset="./static/dd34ffadda4093e094eb5762e0fb8aec/fec1d/02_forces_4.png 576w,./static/dd34ffadda4093e094eb5762e0fb8aec/25280/02_forces_4.png 1152w,./static/dd34ffadda4093e094eb5762e0fb8aec/7cff1/02_forces_4.png 2304w" alt="Малюнок 2.3: Тертя — це сила, яка спрямована в протилежний напрямок від швидкості саней під час їх ковзання по схилу пагорба"/></picture><noscript><picture><source type="image/webp" srcSet="./static/dd34ffadda4093e094eb5762e0fb8aec/cf44c/02_forces_4.webp 576w,./static/dd34ffadda4093e094eb5762e0fb8aec/fec7d/02_forces_4.webp 1152w,./static/dd34ffadda4093e094eb5762e0fb8aec/fbdf6/02_forces_4.webp 2304w" sizes="(min-width: 2304px) 2304px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 2304px) 2304px, 100vw" decoding="async" loading="lazy" src="./static/dd34ffadda4093e094eb5762e0fb8aec/7cff1/02_forces_4.png" srcSet="./static/dd34ffadda4093e094eb5762e0fb8aec/fec1d/02_forces_4.png 576w,./static/dd34ffadda4093e094eb5762e0fb8aec/25280/02_forces_4.png 1152w,./static/dd34ffadda4093e094eb5762e0fb8aec/7cff1/02_forces_4.png 2304w" alt="Малюнок 2.3: Тертя — це сила, яка спрямована в протилежний напрямок від швидкості саней під час їх ковзання по схилу пагорба"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div>
  <figcaption>Малюнок 2.3: Тертя — це сила, яка спрямована в протилежний напрямок від швидкості саней під час їх ковзання по схилу пагорба</figcaption>
</figure>
<p>Згідно з формулою, магнітуда це <span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>μ</mi><mo>×</mo><mi>N</mi></mrow><annotation encoding="application/x-tex">\mu \times N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.1944em"></span><span class="mord mathnormal">μ</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.10903em">N</span></span></span></span></span>. Грецька літера <span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>μ</mi></mrow><annotation encoding="application/x-tex">\mu</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em"></span><span class="mord mathnormal">μ</span></span></span></span></span> (промовляється як <em>мю</em>), використовується тут для опису <strong>коефіцієнта тертя</strong>. Коефіцієнт тертя визначає величину сили тертя для певної поверхні. Чи м вона вища, тим сильніше тертя, чим нижча — тим слабше тертя. Кубик льоду, наприклад, матиме набагато нижчий коефіцієнт тертя, ніж, скажімо, наждачний папір. Оскільки це умовний світ p5.js, я можу довільно встановити коефіцієнт для регулювання сили тертя:</p>
<div class="codesplit callout not-prose" data-code-language="javascript"><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">let</span> c = <span class="hljs-number">0.01</span>;
</code></pre><div class="comment"><p></p></div></div></div>
<p>Тепер щодо другої частини. <span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.10903em">N</span></span></span></span></span> вказує на <strong>силу нормальної реакції</strong> — силу, перпендикулярну до руху об’єкта вздовж поверхні. Уявіть автомобіль, що їде дорогою. Автомобіль тисне на дорогу під дією сили тяжіння і третій закон Ньютона говорить нам, що дорога, своєю чергою, тисне назад і на авто. Це і є сила нормальної реакції (іноді кажуть нормальна реакція опори). Чим більша сила тяжіння, тим більша сила нормальної реакції.</p>
<p>Як ви побачите в наступному розділі, гравітаційне тяжіння пов’язане з масою, тому легке спортивне авто відчуватиме менше тертя, ніж масивна вантажівка з причепом. Однак на малюнку 2.3, де об’єкт рухається вздовж поверхні під кутом, обчислення магнітуди й напрямку сили нормальної реакції трохи складніше, оскільки вона не вказує в протилежному напрямку від сили тяжіння. Для цього вам потрібно знати дещо про кути й тригонометрію.</p>
<p>Усі ці особливості важливі. Однак, “досить хорошу” симуляцію можна досягнути й без них. Я можу, наприклад, налаштувати тертя з припущенням, що нормальна сила завжди матиме магнітуду 1. Коли я перейду до тригонометрії у наступному розділі, ви зможете повернутися до цього питання і зробити даний приклад тертя складнішим. Отож:</p>
<div class="codesplit callout not-prose" data-code-language="javascript"><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">let</span> normal = <span class="hljs-number">1</span>;
</code></pre><div class="comment"><p></p></div></div></div>
<p>Тепер, коли я знаю магнітуду і напрямок тертя, я можу об’єднати все це у коді:</p>
<div class="codesplit callout not-prose" data-code-language="javascript"><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">let</span> c = <span class="hljs-number">0.1</span>;
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">let</span> normal = <span class="hljs-number">1</span>;
</code></pre><div class="comment"><p></p></div></div><div class="pair split"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">let</span> frictionMag = c * normal;
</code></pre><div class="comment"><p>Обчислення величини тертя (насправді довільна константа).</p></div></div><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">let</span> friction = mover.<span class="hljs-property">velocity</span>.<span class="hljs-title function_">copy</span>();
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">friction.<span class="hljs-title function_">mult</span>(-<span class="hljs-number">1</span>);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">friction.<span class="hljs-title function_">normalize</span>();
</code></pre><div class="comment"><p></p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">friction.<span class="hljs-title function_">mult</span>(frictionMag);
</code></pre><div class="comment"><p>Беремо одиничний вектор і множимо його на магнітуду. Отримуємо вектор сили!</p></div></div></div>
<p>Цей код обчислює силу тертя, але не відповідає на питання, <em>коли</em> її застосовувати. Відповіді на це запитання звісно немає, оскільки це все вигаданий світ, візуалізований на 2D полотні p5.js! Я зроблю довільне, але логічне рішення застосовувати тертя, коли кулька стикатиметься з низом поло тна, що я зможу виявити, додавши до класу <code>Mover</code> метод під назвою <code>contactEdge()</code>:</p>
<div class="codesplit callout not-prose" data-code-language="javascript"><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-title function_">contactEdge</span>(<span class="hljs-params"></span>) {
</code></pre><div class="comment"><p></p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">  <span class="hljs-keyword">return</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">position</span>.<span class="hljs-property">y</span> &gt; height - <span class="hljs-variable language_">this</span>.<span class="hljs-property">radius</span> - <span class="hljs-number">1</span>);
</code></pre><div class="comment"><p>Об’єкт торкається краю, коли знаходиться на відстані до нього менше від 1 пікселя.</p></div></div><div class="pair"><pre><code class="hljs code language-javascript">}
</code></pre><div class="comment"><p></p></div></div></div>
<p>Це хороший момент для згадки, що тут фактичний відскок від краю імітує <em>ідеалізоване пружне зіткнення</em>, коли кінетична енергія не втрачається при зіткненні. Це рідко буває правдивим у реальному світі. Візьміть тенісний м’яч і киньте його на будь-яку поверхню. Висота, на яку він відскакуватиме, буде повільно зменшуватися, доки м’яч не зупиниться. Тут діє багато факторів (включаючи опір повітря, який я розгляну трохи далі), але швидкий спосіб симулювати непружне зіткнення —  це зменшувати величину швидкості на певний відсоток із кожним відскоком:</p>
<div class="avoid-break">
  <div class="codesplit callout not-prose" data-code-language="javascript"><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-title function_">bounceEdges</span>(<span class="hljs-params"></span>) {
</code></pre><div class="comment"><p></p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">  <span class="hljs-keyword">let</span> bounce = -<span class="hljs-number">0.9</span>;
</code></pre><div class="comment"><p>Нова змінна для симуляції непружного зіткнення з втратою 10% від швидкості для x або y компонентів.</p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">position</span>.<span class="hljs-property">y</span> &gt; height - <span class="hljs-variable language_">this</span>.<span class="hljs-property">radius</span>) {
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">    <span class="hljs-variable language_">this</span>.<span class="hljs-property">position</span>.<span class="hljs-property">y</span> = height - <span class="hljs-variable language_">this</span>.<span class="hljs-property">radius</span>;
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">    <span class="hljs-variable language_">this</span>.<span class="hljs-property">velocity</span>.<span class="hljs-property">y</span> *= bounce;
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  }
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">}
</code></pre><div class="comment"><p></p></div></div></div>
</div>
<p>Нарешті, я можу додати всі ці фрагменти до коду з прикладу 2.3, і змоделювати вплив на кульку дії від трьох сил: вітру (коли натиснуто мишку), гравітації (завжди) і тепер тертя (під час контакту з нижньою частиною полотна).</p>
<div data-type="example">
  <h3 id="example-24-including-friction"><a class="heading-link" href="#example-24-including-friction">Приклад 2.4: Із врахуванням тертя</a></h3>
  <figure>
    <div class="not-prose clear-both my-4 overflow-hidden rounded border bg-gray-100" style="max-width:1152px"><div class="relative overflow-hidden rounded-t bg-white"><!-- <div class="absolute left-[50%] top-[50%] -translate-x-[50%] -translate-y-[50%] ">Loading sketch ...</div> --><iframe class="w-full border-none transition-opacity opacity-1000" style="aspect-ratio:2.667" loading="lazy" src="./examples/02_forces/example_2_4_including_friction"></iframe></div><div class="flex items-center justify-between border-t"><div class="flex"><button class="flex items-center border-r px-2.5 py-1.5 text-sm hover:bg-gray-200"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" aria-hidden="true" class="h-[15px] w-[15px]" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg><span class="ml-1.5">Reset</span></button><button class="flex items-center border-r px-2.5 py-1.5 text-sm hover:bg-gray-200"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" aria-hidden="true" class="h-4 w-4" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" d="M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span class="ml-1">Pause</span></button></div><a href="https://editor.p5js.org/natureofcode/sketches/I4wC4aXd-E" target="_blank" rel="noreferrer" class="flex items-center px-2.5 text-[0.8rem] hover:underline">Open in Web Editor<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" class="ml-1 text-gray-500" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></a></div></div>
    <figcaption>Клацання кнопкою мишки застосовує силу вітру.</figcaption>
  </figure>
</div>
<div class="codesplit callout not-prose" data-code-language="javascript"><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">draw</span>(<span class="hljs-params"></span>) {
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  <span class="hljs-title function_">background</span>(<span class="hljs-number">255</span>);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  <span class="hljs-keyword">let</span> gravity = <span class="hljs-title function_">createVector</span>(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>);
</code></pre><div class="comment"><p></p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">  mover.<span class="hljs-title function_">applyForce</span>(gravity);
</code></pre><div class="comment"><p>Для більшої точності потрібно враховувати масу, але в цьому прикладі лише одна кулька.</p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  <span class="hljs-keyword">if</span> (mouseIsPressed) {
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">    <span class="hljs-keyword">let</span> wind = <span class="hljs-title function_">createVector</span>(<span class="hljs-number">0.5</span>, <span class="hljs-number">0</span>);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">    mover.<span class="hljs-title function_">applyForce</span>(wind);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  }
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  <span class="hljs-keyword">if</span> (mover.<span class="hljs-title function_">contactEdge</span>()) {
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">    <span class="hljs-keyword">let</span> c = <span class="hljs-number">0.1</span>;
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">    <span class="hljs-keyword">let</span> friction = mover.<span class="hljs-property">velocity</span>.<span class="hljs-title function_">copy</span>();
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">    friction.<span class="hljs-title function_">mult</span>(-<span class="hljs-number">1</span>);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">    friction.<span class="hljs-title function_">setMag</span>(c);
</code></pre><div class="comment"><p></p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">    mover.<span class="hljs-title function_">applyForce</span>(friction);
</code></pre><div class="comment"><p>Застосування до об’єкта вектора сили тертя.</p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  }
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">
</code></pre><div class="comment"><p></p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">  mover.<span class="hljs-title function_">bounceEdges</span>();
</code></pre><div class="comment"><p>Виклик нового методу bounceEdges().</p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  mover.<span class="hljs-title function_">update</span>();
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  mover.<span class="hljs-title function_">show</span>();
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">}
</code></pre><div class="comment"><p></p></div></div></div>
<p>Запускаючи приклад, ви помітите, що кулька поступово сповільнюється до зупинки. Ви можете зробити цей ефект швидшим або повільнішим, змінюючи коефіцієнт тертя, а також відсоток втрати швидкості у методі <code>bounceEdges()</code>.</p>
<div data-type="exercise" class="callout">
  <h3 id="exercise-26"><a class="heading-link" href="#exercise-26">Вправа 2.6</a></h3>
  <p>Додайте другий об’єкт до прикладу 2.4. Як ви обробите д ва об’єкти з різною масою? Що, якщо кожен об’єкт матиме свій коефіцієнт тертя відносно поверхні? Чи є сенс інкапсулювати обчислення сили тертя у методі класу <code>Mover</code>?</p>
</div>
<div data-type="exercise" class="callout">
  <h3 id="exercise-27"><a class="heading-link" href="#exercise-27">Вправа 2.7</a></h3>
  <p>Чи можете ви замість вітру додати таку функціональність до цього прикладу, яка дозволить вам підкидати кульку за допомогою мишки?</p>
</div>
<h3 id="air-and-fluid-resistance"><a class="heading-link" href="#air-and-fluid-resistance">Опір повітря і води</a></h3>
<p>Тертя також виникає при проходженні тіла через рідину або газ. Результівна сила має багато назв, які насправді означають те саме: <em>сила в’язкості</em>, <em>сила опору</em>, <em>аеродинамічний опір</em> або <em>гідродинамічний опір</em> (див. малюнок 2.4).</p>
<p>Ефект сили опору зрештою такий самий, як ефект у наших попередніх прикладах тертя: об’єкт сповільнюється. Однак точна поведінка та обчислення сили опору дещо відрізняються. Ось формула:</p>
<div data-type="equation" class="math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mover accent="true"><msub><mi>F</mi><mi>d</mi></msub><mo>⃗</mo></mover><mo>=</mo><mo>−</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mi>ρ</mi><msup><mi>v</mi><mn>2</mn></msup><mi>A</mi><msub><mi>C</mi><mi>d</mi></msub><mover accent="true"><mi>v</mi><mo>^</mo></mover></mrow><annotation encoding="application/x-tex">\vec{F_d} = - \frac{1}{2}\rho{v}^2 A C_d\hat{v}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1163em;vertical-align:-0.15em"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9663em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span><span style="top:-3.2523em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-0.2355em"><span class="overlay" style="height:0.714em;width:0.471em"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z"></path></svg></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:2.0074em;vertical-align:-0.686em"></span><span class="mord">−</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord mathnormal">ρ</span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">v</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mord mathnormal">A</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6944em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord mathnormal" style="margin-right:0.03588em">v</span></span><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-0.2222em"><span class="mord">^</span></span></span></span></span></span></span></span></span></span></span></div>
<figure>
  <div data-gatsby-image-wrapper="" class="gatsby-image-wrapper gatsby-image-wrapper-constrained"><div style="max-width:2304px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg height=&#x27;1604&#x27; width=&#x27;2304&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:#f8f8f8;position:absolute;top:0;left:0;bottom:0;right:0"></div><picture><source type="image/webp" data-srcset="./static/d81ff2fa249f101addd4ea5a4290b24e/5939a/02_forces_5.webp 576w,./static/d81ff2fa249f101addd4ea5a4290b24e/e1918/02_forces_5.webp 1152w,./static/d81ff2fa249f101addd4ea5a4290b24e/51199/02_forces_5.webp 2304w" sizes="(min-width: 2304px) 2304px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 2304px) 2304px, 100vw" decoding="async" loading="lazy" data-src="./static/d81ff2fa249f101addd4ea5a4290b24e/55a4c/02_forces_5.png" data-srcset="./static/d81ff2fa249f101addd4ea5a4290b24e/09d62/02_forces_5.png 576w,./static/d81ff2fa249f101addd4ea5a4290b24e/f65b7/02_forces_5.png 1152w,./static/d81ff2fa249f101addd4ea5a4290b24e/55a4c/02_forces_5.png 2304w" alt="Ма люнок 2.4: Сила опору (опір повітря або рідини) пропорційна швидкості об’єкта та площі його поверхні, спрямованої в протилежному напрямку до швидкості об’єкта"/></picture><noscript><picture><source type="image/webp" srcSet="./static/d81ff2fa249f101addd4ea5a4290b24e/5939a/02_forces_5.webp 576w,./static/d81ff2fa249f101addd4ea5a4290b24e/e1918/02_forces_5.webp 1152w,./static/d81ff2fa249f101addd4ea5a4290b24e/51199/02_forces_5.webp 2304w" sizes="(min-width: 2304px) 2304px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 2304px) 2304px, 100vw" decoding="async" loading="lazy" src="./static/d81ff2fa249f101addd4ea5a4290b24e/55a4c/02_forces_5.png" srcSet="./static/d81ff2fa249f101addd4ea5a4290b24e/09d62/02_forces_5.png 576w,./static/d81ff2fa249f101addd4ea5a4290b24e/f65b7/02_forces_5.png 1152w,./static/d81ff2fa249f101addd4ea5a4290b24e/55a4c/02_forces_5.png 2304w" alt="Малюнок 2.4: Сила опору (опір повітря або рідини) пропорційна швидкості об’єкта та площі його поверхні, спрямованої в протилежному напрямку до швидкості об’єкта"/></picture></noscript>
    <script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div>
  <figcaption>Малюнок 2.4: Сила  опору (опір повітря або рідини) пропорційна швидкості об’єкта та площі його поверхні, спрямованої в протилежному напрямку до швидкості об’єкта</figcaption>
</figure>
<p>Дозвольте мені розібрати цю формулу, щоб побачити, що насправді необхідно для ефективної симуляції у p5.js, зробивши в процесі спрощену формулу:</p>
<ul>
  <li><span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><msub><mi>F</mi><mi>d</mi></msub><mo>⃗</mo></mover></mrow><annotation encoding="application/x-tex">\vec{F_d}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1163em;vertical-align:-0.15em"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9663em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span><span style="top:-3.2523em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-0.2355em"><span class="overlay" style="height:0.714em;width:0.471em"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z"></path></svg></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span> — вказує на <em>силу опору</em>, вектор для обчислення і передачі у метод <code>applyForce()</code>.</li>
  <li><span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><mn>1</mn><mi mathvariant="normal">/</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">-1/2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord">−</span><span class="mord">1/2</span></span></span></span></span> — є константою. Хоча це важливий фактор для масштабування сили, тут він не дуже актуальний, оскільки я буду вигадувати значення для інших констант масштабування. Проте той факт, що константа від’ємна є важливим, оскільки це вказує на те, що сила спрямована в протилежному напрямку від швидкості (так само як у випадку із тертям).</li>
  <li><span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ρ</mi></mrow><annotation encoding="application/x-tex">\rho</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em"></span><span class="mord mathnormal">ρ</span></span></span></span></span> — це грецька буква <em>ро</em>, інша константа, яка вказує на густину рідини. Наразі я вирішив проігнорувати її та вважати рівною 1.</li>
  <li><span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi></mrow><annotation encoding="application/x-tex">v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal" style="margin-right:0.03588em">v</span></span></span></span></span> — вказує на швидкість руху об’єкта. Гаразд, ви вже знаєте це! Швидкість об’єкта — це магнітуда вектора швидкості: <code>velocity.mag()</code>. А <span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>v</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">v^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">v</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span> просто означає <span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi></mrow><annotation encoding="application/x-tex">v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal" style="margin-right:0.03588em">v</span></span></span></span></span> у квадраті, або <span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi><mo>×</mo><mi>v</mi></mrow><annotation encoding="application/x-tex">v \times v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em"></span><span class="mord mathnormal" style="margin-right:0.03588em">v</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal" style="margin-right:0.03588em">v</span></span></span></span></span>. (Зауважу, що це передбачає, що рідина або газ знаходиться на місці й не рухається. Якщо ви кинете об’єкт у потік річки, вам також потрібно врахувати відносну швидкість води.)</li>
  <li><span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal">A</span></span></span></span></span> — вказує на площу фронтальної поверхні об’єкта, який проштовхується через рідину або газ. Уявіть плаский аркуш паперу, який падає у повітрі, і порівняйте його з гострим олівцем, спрямованим вертикально вниз. Олівець відчує менший опір, оскільки має меншу площу поверхні, спрямовану в напрямку його руху. Знову ж таки, це константа, і для простоти імплементації я вважатиму, що всі об’єкти мають сферичну форму та ігноруватиму цей показник.</li>
  <li><span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>C</mi><mi>d</mi></msub></mrow><annotation encoding="application/x-tex">C_d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span> — це коефіцієнт опору, точно такий же, як і коефіцієнт тертя (μ). Ця константа визначатиме відносну силу опору.</li>
  <li><span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mi>v</mi><mo>^</mo></mover></mrow><annotation encoding="application/x-tex">\hat{v}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6944em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord mathnormal" style="margin-right:0.03588em">v</span></span><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-0.2222em"><span class="mord">^</span></span></span></span></span></span></span></span></span></span></span> — має виглядати знайомо. Це одиничний вектор швидкості, знайдений за допомогою <code>velocity.normalize()</code>. Так само як тертя, опір — це сила, яка спрямована в протилежний напрямок від швидкості.</li>
</ul>
<p>Тепер, коли я проаналізував кожну із цих складових і визначив, що потрібно для моєї симуляції, я можу скоротити формулу, як показано на малюнку 2.5.</p>
<figure>
  <div data-gatsby-image-wrapper="" class="gatsby-image-wrapper gatsby-image-wrapper-constrained"><div style="max-width:2304px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg height=&#x27;431&#x27; width=&#x27;2304&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:#f8f8f8;position:absolute;top:0;left:0;bottom:0;right:0"></div><picture><source type="image/webp" data-srcset="./static/52b314429d29a9f46977de198eeec79e/286c7/02_forces_6.webp 576w,./static/52b314429d29a9f46977de198eeec79e/006e5/02_forces_6.webp 1152w,./static/52b314429d29a9f46977de198eeec79e/b4f61/02_forces_6.webp 2304w" sizes="(min-width: 2304px) 2304px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 2304px) 2304px, 100vw" decoding="async" loading="lazy" data-src="./static/52b314429d29a9f46977de198eeec79e/ab45f/02_forces_6.png" data-srcset="./static/52b314429d29a9f46977de198eeec79e/26549/02_forces_6.png 576w,./static/52b314429d29a9f46977de198eeec79e/00516/02_forces_6.png 1152w,./static/52b314429d29a9f46977de198eeec79e/ab45f/02_forces_6.png 2304w" alt="Малюнок 2.5: Моя спрощена формула для сили опору"/></picture><noscript><picture><source type="image/webp" srcSet="./static/52b314429d29a9f46977de198eeec79e/286c7/02_forces_6.webp 576w,./static/52b314429d29a9f46977de198eeec79e/006e5/02_forces_6.webp 1152w,./static/52b314429d29a9f46977de198eeec79e/b4f61/02_forces_6.webp 2304w" sizes="(min-width: 2304px) 2304px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 2304px) 2304px, 100vw" decoding="async" loading="lazy" src="./static/52b314429d29a9f46977de198eeec79e/ab45f/02_forces_6.png" srcSet="./static/52b314429d29a9f46977de198eeec79e/26549/02_forces_6.png 576w,./static/52b314429d29a9f46977de198eeec79e/00516/02_forces_6.png 1152w,./static/52b314429d29a9f46977de198eeec79e/ab45f/02_forces_6.png 2304w" alt="Малюнок 2.5: Моя спрощена формула для сили опору"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div>
  <figcaption>Малюнок 2.5: Моя спрощена формула для сили опору</figcaption>
</figure>
<p>Хоча я написав спрощену формулу з <span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>C</mi><mi>d</mi></msub></mrow><annotation encoding="application/x-tex">C_d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span> як єдиною константою, яка представляє коефіцієнт опору, я також можу думати про неї як про всі об’єднані константи разом (<span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><mn>1</mn><mi mathvariant="normal">/</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">-1/2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord">−</span><span class="mord">1/2</span></span></span></span></span>, <span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ρ</mi></mrow><annotation encoding="application/x-tex">\rho</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em"></span><span class="mord mathnormal">ρ</span></span></span></span></span>, <span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal">A</span></span></span></span></span>). Складніша симуляція може розглядати ці константи окремо — ви можете спробувати врахувати їх окремою вправою.</p>
<p>Ось спрощена версія формули для опору:</p>
<div class="codesplit callout not-prose" data-code-language="javascript"><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">let</span> c = <span class="hljs-number">0.1</span>;
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">let</span> speed = <span class="hljs-variable language_">this</span>.<span class="hljs-property">velocity</span>.<span class="hljs-title function_">mag</span>();
</code></pre><div class="comment"><p></p></div></div><div class="pair split"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">let</span> dragMagnitude = c * speed * speed;
</code></pre><div class="comment"><p>Перша частина формули (магнітуда).</p></div></div><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">let</span> drag = <span class="hljs-variable language_">this</span>.<span class="hljs-property">velocity</span>.<span class="hljs-title function_">copy</span>();
</code></pre><div class="comment"><p></p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">drag.<span class="hljs-title function_">mult</span>(-<span class="hljs-number">1</span>);
</code></pre><div class="comment"><p>Друга частина формули (напрямок).</p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">drag.<span class="hljs-title function_">setMag</span>(dragMagnitude);
</code></pre><div class="comment"><p>Магнітуда і напрямок разом!</p></div></div></div>
<p>Реалізуємо цю силу на прикладі класу <code>Mover</code>. Але коли я повинен застосовувати її? Раніше я включав силу тертя, щоб уповільнити кульку, коли вона торкалася нижнього краю полотна. Тепер я введу новий елемент у середовище — об’єкт <code>Liquid</code>, який чинитиме опір, коли кулька проходитиме крізь нього. “Рідина” буде намальована у вигляді прямокутника з певним положенням, шириною і висотою та матиме коефіцієнт опору, який визначає, чи легко об’єктам рухатися крізь неї (як у повітрі), чи важко (як у патоці). Крім того, вона включатиме метод <code>show()</code>, щоб ми могли бачити її на полотні:</p>
<div class="codesplit callout not-prose" data-code-language="javascript"><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Liquid</span> {
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">x, y, w, h, c</span>) {
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">    <span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span> = x;
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">    <span class="hljs-variable language_">this</span>.<span class="hljs-property">y</span> = y;
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">    <span class="hljs-variable language_">this</span>.<span class="hljs-property">w</span> = w;
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">    <span class="hljs-variable language_">this</span>.<span class="hljs-property">h</span> = h;
</code></pre><div class="comment"><p></p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">    <span class="hljs-variable language_">this</span>.<span class="hljs-property">c</span> = c;
</code></pre><div class="comment"><p>Об’єкт рідини містить змінну, що визначає її коефіцієнт опору.</p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  }
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  <span class="hljs-title function_">show</span>(<span class="hljs-params"></span>) {
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">    <span class="hljs-title function_">noStroke</span>();
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">    <span class="hljs-title function_">fill</span>(<span class="hljs-number">175</span>);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">    <span class="hljs-title function_">rect</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">y</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">w</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">h</span>);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  }
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">}
</code></pre><div class="comment"><p></p></div></div></div>
<p>Тепер у програмі потрібна змінна <code>liquid</code>, ініціалізована у функції <code>setup()</code>. Я розміщу рідину в нижній половині полотна:</p>
<div class="codesplit callout not-prose" data-code-language="javascript"><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">let</span> liquid;
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>) {
</code></pre><div class="comment"><p></p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">  liquid = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Liquid</span>(<span class="hljs-number">0</span>, height / <span class="hljs-number">2</span>, width, height / <span class="hljs-number">2</span>, <span class="hljs-number">0.1</span>);
</code></pre><div class="comment"><p>Ініціалізація об&#x27;єкта liquid. Я обираю низький коефіцієнт (0.1) для слабшого ефекту. Спробуйте більший!</p></div></div><div class="pair"><pre><code class="hljs code language-javascript">}
</code></pre><div class="comment"><p></p></div></div></div>
<p>Тепер виникає цікаве питання: як об’єкт <code>Mover</code> взаємодіє з об’єктом <code>Liquid</code>? Я хочу реалізувати наступну поведінку:</p>
<blockquote data-type="epigraph">
  <p><em>При проходженні кулькою рідини, ця кулька має відчувати силу опору.</em></p>
</blockquote>
<p>Перекладемо це на об’єктно-орієнтовану мову:</p>
<div class="codesplit callout not-prose" data-code-language="javascript"><div class="pair split"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">if</span> (liquid.<span class="hljs-title function_">contains</span>(mover)) {
  <span class="hljs-keyword">let</span> dragForce = liquid.<span class="hljs-title function_">calculateDrag</span>(mover);
  mover.<span class="hljs-title function_">applyForce</span>(dragForce);
} 
</code></pre><div class="comment"><p>Якщо рідина містить об’єкт, застосуємо до нього силу її опору.</p></div></div></div>
<p>Цей код слугує інструкцією для того, що мені потрібно додати до класу <code>Liquid</code>: по-перше це метод <code>contains()</code>, який визначатиме, чи об’єкт <code>Mover</code> знаходиться всередині області об’єкта <code>Liquid</code>, і по-друге це метод <code>drag()</code>, який обчислюватиме та повертатиме відповідну силу опору, яка буде застосована до об’єкта <code>Mover</code>.</p>
<p>Перший метод простий: я можу використати логічний вираз, щоб визначити, чи вектор <code>position</code> розташований всередині прямокутника, визначеного рідиною:</p>
<div class="codesplit callout not-prose" data-code-language="javascript"><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-title function_">contains</span>(<span class="hljs-params">mover</span>) {
</code></pre><div class="comment"><p></p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">  <span class="hljs-keyword">let</span> pos = mover.<span class="hljs-property">position</span>;
</code></pre><div class="comment"><p>Збережемо положення в окремій змінній, щоб зробити код більш читабельним.</p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">  <span class="hljs-keyword">return</span> (pos.<span class="hljs-property">x</span> &gt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span> &amp;&amp; pos.<span class="hljs-property">x</span> &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">w</span> &amp;&amp;
          pos.<span class="hljs-property">y</span> &gt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">y</span> &amp;&amp; pos.<span class="hljs-property">y</span> &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">y</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">h</span>);
</code></pre><div class="comment"><p>Цей логічний вираз визначає, чи вектор положення розташований у прямокутнику, визначеному класом Liquid.</p></div></div><div class="pair"><pre><code class="hljs code language-javascript">}
</code></pre><div class="comment"><p></p></div></div></div>
<p>Метод <code>calculateDrag()</code> також досить простий: я практично вже написав для нього код, коли реалізував спрощену формулу опору! Сила опору дорівнює <em>коефіцієнту опору, помноженому на квадрат швидкості об’єкта в протилежному напрямку від його швидкості</em>:</p>
<div class="codesplit callout not-prose" data-code-language="javascript"><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-title function_">calculateDrag</span>(<span class="hljs-params">mover</span>) {
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  <span class="hljs-keyword">let</span> speed = mover.<span class="hljs-property">velocity</span>.<span class="hljs-title function_">mag</span>();
</code></pre><div class="comment"><p></p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">  <span class="hljs-keyword">let</span> dragMagnitude = <span class="hljs-variable language_">this</span>.<span class="hljs-property">c</span> * speed * speed;
</code></pre><div class="comment"><p>Обчислення величини магнітуди.</p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">  <span class="hljs-keyword">let</span> dragForce = mover.<span class="hljs-property">velocity</span>.<span class="hljs-title function_">copy</span>();
  dragForce.<span class="hljs-title function_">mult</span>(-<span class="hljs-number">1</span>);
</code></pre><div class="comment"><p>Обчислення напрямку сили.</p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">  dragForce.<span class="hljs-title function_">setMag</span>(dragMagnitude);
</code></pre><div class="comment"><p>Завершення визначення сили: об’єднання магнітуди і напрямку.</p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">  <span class="hljs-keyword">return</span> dragForce;
</code></pre><div class="comment"><p>Повернення сили.</p></div></div><div class="pair"><pre><code class="hljs code language-javascript">}
</code></pre><div class="comment"><p></p></div></div></div>
<p>З цими двома методами, доданими до класу <code>Liquid</code>, я готовий зібрати все разом! У наступному прикладі я розширю код і використаю масив рівномірно розташованих об’єктів <code>Mover</code>, щоб продемонструвати, як сила опору поводиться з об’єктами різної маси. Це також ілюструє альтернативний спосіб ініціалізації симуляції, окрім випадкового. Знайдіть у коді ось цю частину: <code>40 + i * 70</code>. Початкове значення для зміщення <code>40</code> надає невеликий відступ від краю полотна, а <code>i * 70</code> використовує індекс об’єктів для їх рівномірного розташування. Відступ і множник довільні. Ви можете спробувати інші значення або розглянути інші способи обчислення відстані на основі розмірів полотна.</p>
<div data-type="example">
  <h3 id="example-25-fluid-resistance"><a class="heading-link" href="#example-25-fluid-resistance">Приклад 2.5: Опір рідини</a></h3>
  <figure>
    <div class="not-prose clear-both my-4 overflow-hidden rounded border bg-gray-100" style="max-width:1152px"><div class="relative overflow-hidden rounded-t bg-white"><!-- <div class="absolute left-[50%] top-[50%] -translate-x-[50%] -translate-y-[50%] ">Loading sketch ...</div> --><iframe class="w-full border-none transition-opacity opacity-1000" style="aspect-ratio:2.667" loading="lazy" src="./examples/02_forces/example_2_5_fluid_resistance"></iframe></div><div class="flex items-center justify-between border-t"><div class="flex"><button class="flex items-center border-r px-2.5 py-1.5 text-sm hover:bg-gray-200"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" aria-hidden="true" class="h-[15px] w-[15px]" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg><span class="ml-1.5">Reset</span></button><button class="flex items-center border-r px-2.5 py-1.5 text-sm hover:bg-gray-200"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" aria-hidden="true" class="h-4 w-4" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" d="M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span class="ml-1">Pause</span></button></div><a href="https://editor.p5js.org/natureofcode/sketches/FknzcAaVh" target="_blank" rel="noreferrer" class="flex items-center px-2.5 text-[0.8rem] hover:underline">Open in Web Editor<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" class="ml-1 text-gray-500" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></a></div></div>
    <figcaption>Клацання мишкою перезапустить програму.</figcaption>
  </figure>
</div>
<div class="codesplit callout not-prose" data-code-language="javascript"><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">let</span> movers = [];
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">let</span> liquid;
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>) {
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  <span class="hljs-title function_">createCanvas</span>(<span class="hljs-number">640</span>, <span class="hljs-number">240</span>);
</code></pre><div class="comment"><p></p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">9</span>; i++) {
</code></pre><div class="comment"><p>Цикл для ініціалізації масиву об’єктів типу Mover.</p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">    <span class="hljs-keyword">let</span> mass = <span class="hljs-title function_">random</span>(<span class="hljs-number">0.1</span>, <span class="hljs-number">5</span>);
</code></pre><div class="comment"><p>Для кожного об’єкта готується випадкова маса.</p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">    movers[i] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Mover</span>(<span class="hljs-number">40</span> + i * <span class="hljs-number">70</span>, <span class="hljs-number">0</span>, mass);
</code></pre><div class="comment"><p>Рівномірне розподілення x-значень відповідно до індексу в масиві.</p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  }
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  liquid = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Liquid</span>(<span class="hljs-number">0</span>, height / <span class="hljs-number">2</span>, width, height / <span class="hljs-number">2</span>, <span class="hljs-number">0.1</span>);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">}
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">draw</span>(<span class="hljs-params"></span>) {
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  <span class="hljs-title function_">background</span>(<span class="hljs-number">255</span>);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">
</code></pre><div class="comment"><p></p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">  liquid.<span class="hljs-title function_">show</span>();
</code></pre><div class="comment"><p>Малювання рідини.</p></div></div><div class="pair"><pre><code class="hljs code language-javascript">
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; movers.<span class="hljs-property">length</span>; i++) {
</code></pre><div class="comment"><p></p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">    <span class="hljs-keyword">if</span> (liquid.<span class="hljs-title function_">contains</span>(movers[i])) {
</code></pre><div class="comment"><p>Чи об’єкт знаходиться у рідині?</p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">      <span class="hljs-keyword">let</span> dragForce = liquid.<span class="hljs-title function_">drag</span>(movers[i]);
</code></pre><div class="comment"><p>Обчислення сили опору.</p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">      movers[i].<span class="hljs-title function_">applyForce</span>(dragForce);
</code></pre><div class="comment"><p>Застосування сили опору до об’єкту.</p></div></div><div class="pair"><pre><code class="hljs code language-javascript">    }
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">
</code></pre><div class="comment"><p></p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">    <span class="hljs-keyword">let</span> gravity = <span class="hljs-title function_">createVector</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0.1</span> * movers[i].<span class="hljs-property">mass</span>);
</code></pre><div class="comment"><p>Тут гравітація масштабується відповідно масі!</p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">    movers[i].<span class="hljs-title function_">applyForce</span>(gravity);
</code></pre><div class="comment"><p>Застосування гравітації.</p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">    movers[i].<span class="hljs-title function_">update</span>();
    movers[i].<span class="hljs-title function_">show</span>();
    movers[i].<span class="hljs-title function_">checkEdges</span>();
</code></pre><div class="comment"><p>Оновлення і відображення об’єкта.</p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  }
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">}
</code></pre><div class="comment"><p></p></div></div></div>
<p>Під час роботи прикладу, ви можете помітити, що він імітує падіння об’єктів у воду. Об’єкти сповільнюються під час проходження через сіру область у нижній частині вікна, яка являє собою рідину. Ви також помітите, що менші об’єкти сповільнюються значно сильніше, ніж більші. Пам&#x27;ятаєте другий закон Ньютона? Прискорення дорівнює силі <em>поділеній на масу</em> (<span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mi>A</mi><mo>⃗</mo></mover><mo>=</mo><mover accent="true"><mi>F</mi><mo>⃗</mo></mover><mi mathvariant="normal">/</mi><mi>M</mi></mrow><annotation encoding="application/x-tex">\vec{A} = \vec{F} / M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9663em"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9663em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord mathnormal">A</span></span><span style="top:-3.2523em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-0.0966em"><span class="overlay" style="height:0.714em;width:0.471em"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z"></path></svg></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.2163em;vertical-align:-0.25em"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9663em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord mathnormal" style="margin-right:0.13889em">F</span></span><span style="top:-3.2523em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-0.1522em"><span class="overlay" style="height:0.714em;width:0.471em"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z"></path></svg></span></span></span></span></span></span></span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:0.10903em">M</span></span></span></span></span>), тому масивніший об’єкт прискорюватиметься менше, а менш масивний — більше. У цьому випадку прискорення є “уповільненням” через опір. Менші об&#x27;єкти сповільнюються з більшою швидкістю, ніж великі.</p>
<div data-type="exercise" class="callout">
  <h3 id="exercise-28"><a class="heading-link" href="#exercise-28">Вправа 2.8</a></h3>
  <p>Ви можете помітити, що якщо у прикладі 2.5 встановити занадто високий коефіцієнт опору, кульки можуть відскочити від рідини! Це пов’язано з неточністю великих кроків часу, про які я згадував раніше в цьому розділі. Сила опору призведе до зупинки об’єкта, але ніколи не змінить напрямок. Поміркуйте як ви можете використати векторний метод <code>limit()</code> для розв&#x27;язання цієї проблеми? Ви також можете спробувати скидати об’єкти з різної висоти. Як це впливає на опір при зіткненні з рідиною?</p>
</div>
<div data-type="exercise" class="callout">
  <h3 id="exercise-29"><a class="heading-link" href="#exercise-29">Вправа 2.9</a></h3>
  <p>Оригінальна формула для опору включала площу поверхні. Чи можете ви створити симуляцію падіння коробок у воду з таким опором, який залежатиме від довжини тої сторони, яка стикатиметься з водою?</p>
</div>
<div data-type="exercise" class="callout">
  <h3 id="exercise-210"><a class="heading-link" href="#exercise-210">Вправа 2.10</a></h3>
  <p>На додаток до опору, протилежному вектору швидкості, сила опору також може бути перпендикулярною. Цей опір називається <strong>підіймальною силою</strong> і призводить до того, що літак із нахиленим крилом підіймається на висоту. Спробуйте створити імітацію цієї сили.</p>
</div>
<h3 id="gravitational-attraction"><a class="heading-link" href="#gravitational-attraction">Гравітаційне тяжіння</a></h3>
<div class="half-width-right">
  <figure>
    <div data-gatsby-image-wrapper="" class="gatsby-image-wrapper gatsby-image-wrapper-constrained"><div style="max-width:1152px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg height=&#x27;800&#x27; width=&#x27;1152&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:#f8f8f8;position:absolute;top:0;left:0;bottom:0;right:0"></div><picture><source type="image/webp" data-srcset="./static/6a735185c803a7bdab87cbf2d17fb5d6/5396f/02_forces_7.webp 288w,./static/6a735185c803a7bdab87cbf2d17fb5d6/e0432/02_forces_7.webp 576w,./static/6a735185c803a7bdab87cbf2d17fb5d6/45a59/02_forces_7.webp 1152w" sizes="(min-width: 1152px) 1152px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 1152px) 1152px, 100vw" decoding="async" loading="lazy" data-src="./static/6a735185c803a7bdab87cbf2d17fb5d6/7214d/02_forces_7.png" data-srcset="./static/6a735185c803a7bdab87cbf2d17fb5d6/d0043/02_forces_7.png 288w,./static/6a735185c803a7bdab87cbf2d17fb5d6/4169a/02_forces_7.png 576w,./static/6a735185c803a7bdab87cbf2d17fb5d6/7214d/02_forces_7.png 1152w" alt="Малюнок 2.6: Гравітаційна сила між двома тілами пропорційна масі цих тіл і обернено пропорційна квадрату відстані між ними"/></picture><noscript><picture><source type="image/webp" srcSet="./static/6a735185c803a7bdab87cbf2d17fb5d6/5396f/02_forces_7.webp 288w,./static/6a735185c803a7bdab87cbf2d17fb5d6/e0432/02_forces_7.webp 576w,./static/6a735185c803a7bdab87cbf2d17fb5d6/45a59/02_forces_7.webp 1152w" sizes="(min-width: 1152px) 1152px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 1152px) 1152px, 100vw" decoding="async" loading="lazy" src="./static/6a735185c803a7bdab87cbf2d17fb5d6/7214d/02_forces_7.png" srcSet="./static/6a735185c803a7bdab87cbf2d17fb5d6/d0043/02_forces_7.png 288w,./static/6a735185c803a7bdab87cbf2d17fb5d6/4169a/02_forces_7.png 576w,./static/6a735185c803a7bdab87cbf2d17fb5d6/7214d/02_forces_7.png 1152w" alt="Малюнок 2.6: Гравітаційна сила між двома тілами пропорційна масі цих тіл і обернено пропорційна квадрату відстані між ними"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div>
    <figcaption>Малюнок 2.6: Гравітаційна сила між двома тілами пропорційна масі цих тіл і обернено пропорційна квадрату відстані між ними</figcaption>
  </figure>
</div>
<p>Ймовірно, найвідомішою силою з усіх є гравітаційне тяжіння. Ми, люди на Землі, думаємо про гравітацію як про падіння речей вниз, як яблуко, що зривається з дерева і вдаряє по голові сера Ісаака Ньютона. Але це лише наш <em>досвід сприйняття</em> гравітації. Реальність набагато складніша.</p>
<p>Насправді так само як Земля притягує до себе яблуко завдяки гравітаційній силі, яблуко т акож притягує Землю (це третій закон Ньютона). Просто Земля настільки масивна, що переважає всі інші гравітаційні взаємодії. Фактично кожен об’єкт із масою впливає своєю силою тяжіння на будь-який інший об’єкт. Формула для обчислення величини цих сил зображена на малюнку 2.6.</p>
<p>Розглянемо цю формулу трохи детальніше:</p>
<ul>
  <li><span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><msub><mi>F</mi><mi>g</mi></msub><mo>⃗</mo></mover></mrow><annotation encoding="application/x-tex">\vec{F_g}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2524em;vertical-align:-0.2861em"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9663em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em">g</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em"><span></span></span></span></span></span></span></span><span style="top:-3.2523em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-0.2355em"><span class="overlay" style="height:0.714em;width:0.471em"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z"></path></svg></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em"><span></span></span></span></span></span></span></span></span></span> — позначає гравітаційну силу, вектор, який обчислюється і передається в метод <code>applyForce()</code>.</li>
  <li><span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi></mrow><annotation encoding="application/x-tex">G</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal">G</span></span></span></span></span> — це <em>універсальна гравітаційна константа</em>, яка в нашому світі дорівнює <span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>6.67428</mn><mo>×</mo><mn>1</mn><msup><mn>0</mn><mrow><mo>−</mo><mn>11</mn></mrow></msup></mrow><annotation encoding="application/x-tex">6.67428 \times 10^{-11}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em"></span><span class="mord">6.67428</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.8141em"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">11</span></span></span></span></span></span></span></span></span></span></span></span></span> кубічних метрів на кілограм на секунду у квадраті. Це досить важливе число, якщо ви людина, але воно не так важливо, якщо ви якась фігура, що блукає по полотну p5.js. Знову ж таки, це константа, яку можна використовувати для масштабування сил у світі, роблячи їх сильнішими чи слабшими. Просто прирівняти її значення до 1 і ігнорувати буде не таким вже й жахливим вибором.</li>
  <li><span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>m</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">m_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span> і <span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>m</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">m_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span> є масами першого і другого об’єктів. Масу в цьому випадку теж можна було б проігнорувати, як я робив це на початку з другим законом Ньютона (<span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mi>F</mi><mo>⃗</mo></mover><mo>=</mo><mi>M</mi><mo>×</mo><mover accent="true"><mi>A</mi><mo>⃗</mo></mover></mrow><annotation encoding="application/x-tex">\vec{F} = M \times \vec{A}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9663em"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9663em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord mathnormal" style="margin-right:0.13889em">F</span></span><span style="top:-3.2523em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-0.1522em"><span class="overlay" style="height:0.714em;width:0.471em"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z"></path></svg></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em"></span><span class="mord mathnormal" style="margin-right:0.10903em">M</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.9663em"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9663em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord mathnormal">A</span></span><span style="top:-3.2523em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-0.0966em"><span class="overlay" style="height:0.714em;width:0.471em"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z"></path></svg></span></span></span></span></span></span></span></span></span></span></span>). Зрештою, фігури, намальовані на екрані, не мають фізичної маси. Однак, якщо ви враховуєте це значення, то можете створювати цікавіші симуляції, в яких “більші” об’єкти проявляють більший гравітаційний вплив, ніж “менші”.</li>
  <li><span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mi>r</mi><mo>^</mo></mover></mrow><annotation encoding="application/x-tex">\hat{r}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6944em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord mathnormal" style="margin-right:0.02778em">r</span></span><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-0.1944em"><span class="mord">^</span></span></span></span></span></span></span></span></span></span></span> — посилається на одиничний вектор, що вказує напрям від об’єкта 1 до об’єкта 2. Як ви незабаром побачите, цей вектор напрямку можна обчислити, віднімаючи положення одного об&#x27;єкта від іншого.</li>
  <li><span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>r</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">r^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em">r</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span> — це відстань між двома об’єктами піднесена у квадрат.</li>
</ul>
<p>Подумайте трохи про цю формулу. Чим більше значення будь-якої складової у верхній частині формули — <span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi></mrow><annotation encoding="application/x-tex">G</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal">G</span></span></span></span></span>, <span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>m</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">m_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span>, <span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>m</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">m_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span> — тим більшою буде сила. Велика маса — велика сила. Велике <span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi></mrow><annotation encoding="application/x-tex">G</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal">G</span></span></span></span></span> — велика сила. Однак для <span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>r</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">r^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em">r</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span> у нижній частині формули, ситуація протилежна: чим більше значення (чим далі знаходиться об’єкт), тим слабша сила. З математичної точки зору, сила гравітації <strong>обернено пропорційна</strong> квадрату відстані.</p>
<p>Настав час розібратися, як перекласти цю формулу в код на p5.js. Для цього я зроблю наступні припущення:</p>
<ul>
  <li>Є два об&#x27;єкти</li>
  <li>Кожен об’єкт має позицію: <code>position1</code> і <code>position2</code></li>
  <li>Кожен об’єкт має масу: <code>mass1</code> і <code>mass2</code></li>
  <li>Змінна <code>G</code> представляє універсальну гравітаційну константу</li>
</ul>
<div class="half-width-right">
  <figure>
    <div data-gatsby-image-wrapper="" class="gatsby-image-wrapper gatsby-image-wrapper-constrained"><div style="max-width:1152px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg height=&#x27;571&#x27; width=&#x27;1152&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:#f8f8f8;position:absolute;top:0;left:0;bottom:0;right:0"></div><picture><source type="image/webp" data-srcset="./static/19ea1eab0f49b532e2696e23cf2b5e16/94dcf/02_forces_8.webp 288w,./static/19ea1eab0f49b532e2696e23cf2b5e16/fc436/02_forces_8.webp 576w,./static/19ea1eab0f49b532e2696e23cf2b5e16/11979/02_forces_8.webp 1152w" sizes="(min-width: 1152px) 1152px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 1152px) 1152px, 100vw" decoding="async" loading="lazy" data-src="./static/19ea1eab0f49b532e2696e23cf2b5e16/caf34/02_forces_8.png" data-srcset="./static/19ea1eab0f49b532e2696e23cf2b5e16/cdfe3/02_forces_8.png 288w,./static/19ea1eab0f49b532e2696e23cf2b5e16/83cdf/02_forces_8.png 576w,./static/19ea1eab0f49b532e2696e23cf2b5e16/caf34/02_forces_8.png 1152w" alt="Малюнок 2.7: Вектор прискорення, що вказує на положення курсора"/></picture><noscript><picture><source type="image/webp" srcSet="./static/19ea1eab0f49b532e2696e23cf2b5e16/94dcf/02_forces_8.webp 288w,./static/19ea1eab0f49b532e2696e23cf2b5e16/fc436/02_forces_8.webp 576w,./static/19ea1eab0f49b532e2696e23cf2b5e16/11979/02_forces_8.webp 1152w" sizes="(min-width: 1152px) 1152px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 1152px) 1152px, 100vw" decoding="async" loading="lazy" src="./static/19ea1eab0f49b532e2696e23cf2b5e16/caf34/02_forces_8.png" srcSet="./static/19ea1eab0f49b532e2696e23cf2b5e16/cdfe3/02_forces_8.png 288w,./static/19ea1eab0f49b532e2696e23cf2b5e16/83cdf/02_forces_8.png 576w,./static/19ea1eab0f49b532e2696e23cf2b5e16/caf34/02_forces_8.png 1152w" alt="Малюнок 2.7: Вектор прискорення, що вказує на положення курсора"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div>
    <figcaption>Малюнок 2.7: Вектор прискорення, що вказує на положення курсора</figcaption>
  </figure>
</div>
<p>Враховуючи ці припущення, я хочу обчислити силу тяжіння, а саме вектор. Я зроблю це у два кроки. Спочатку обчислю напрямок сили (<span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mi>r</mi><mo>^</mo></mover></mrow><annotation encoding="application/x-tex">\hat{r}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6944em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord mathnormal" style="margin-right:0.02778em">r</span></span><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-0.1944em"><span class="mord">^</span></span></span></span></span></span></span></span></span></span></span> у формулі). Потім розрахую величину сили, враховуючи маси об’єктів й відстань між ними.</p>
<p>Пам’ятаєте як у <a href="/vectors#algorithm-3-interactive-motion">Розділі 1</a> я створив приклад об’єкта, що прискорюється до курсора (див. Малюнок 2.7)? Як я тоді показав, вектор можна розглядати як різницю між двома точками, тому щоб обчислити вектор, що направлений від кульки до курсора, я віднімав одну точку від іншої:</p>
<div class="codesplit callout not-prose" data-code-language="javascript"><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">let</span> direction = p5.<span class="hljs-property">Vector</span>.<span class="hljs-title function_">sub</span>(mouse, position);
</code></pre><div class="comment"><p></p></div></div></div>
<p>Тепер я можу зробити те саме, щоб обчислити <span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mi>r</mi><mo>^</mo></mover></mrow><annotation encoding="application/x-tex">\hat{r}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6944em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord mathnormal" style="margin-right:0.02778em">r</span></span><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="accent-body" style="left:-0.1944em"><span class="mord">^</span></span></span></span></span></span></span></span></span></span></span> — напрямок сили притягання, яку об’єкт 1 чинить на об’єкт 2:</p>
<div class="codesplit callout not-prose" data-code-language="javascript"><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">let</span> direction = p5.<span class="hljs-property">Vector</span>.<span class="hljs-title function_">sub</span>(position1, position2);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">direction.<span class="hljs-title function_">normalize</span>();
</code></pre><div class="comment"><p></p></div></div></div>
<p>Не забувайте, що оскільки мені потрібен одиничний вектор — вектор, який вказує лише напрямок — важливо <em>нормалізувати</em> вектор, отриманий після віднімання векторів положення об’єктів. (Пізніше я можу пропустити цей крок і використовувати замість нього метод <code>setMag()</code>.)</p>
<p>Тепер, коли я знаю напрямок сили, мені потрібно обчислити її величину і відповідно масштабувати вектор:</p>
<div class="codesplit callout not-prose" data-code-language="javascript"><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">let</span> magnitude = (G * mass1 * mass2) / (distance * distance);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">dir.<span class="hljs-title function_">mult</span>(magnitude);
</code></pre><div class="comment"><p></p></div></div></div>
<div class="half-width-right">
  <figure>
    <div data-gatsby-image-wrapper="" class="gatsby-image-wrapper gatsby-image-wrapper-constrained"><div style="max-width:1152px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg height=&#x27;680&#x27; width=&#x27;1152&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:#f8f8f8;position:absolute;top:0;left:0;bottom:0;right:0"></div><picture><source type="image/webp" data-srcset="./static/c56bbc036a983908ae60217b6cee1d41/3c16c/02_forces_9.webp 288w,./static/c56bbc036a983908ae60217b6cee1d41/d3fc0/02_forces_9.webp 576w,./static/c56bbc036a983908ae60217b6cee1d41/7e8a4/02_forces_9.webp 1152w" sizes="(min-width: 1152px) 1152px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 1152px) 1152px, 100vw" decoding="async" loading="lazy" data-src="./static/c56bbc036a983908ae60217b6cee1d41/b9785/02_forces_9.png" data-srcset="./static/c56bbc036a983908ae60217b6cee1d41/e74ac/02_forces_9.png 288w,./static/c56bbc036a983908ae60217b6cee1d41/120bd/02_forces_9.png 576w,./static/c56bbc036a983908ae60217b6cee1d41/b9785/02_forces_9.png 1152w" alt="Малюнок 2.8: Вектор, який вказує з одного положення на інше, обчислюється як різниця між цими положеннями"/></picture><noscript><picture><source type="image/webp" srcSet="./static/c56bbc036a983908ae60217b6cee1d41/3c16c/02_forces_9.webp 288w,./static/c56bbc036a983908ae60217b6cee1d41/d3fc0/02_forces_9.webp 576w,./static/c56bbc036a983908ae60217b6cee1d41/7e8a4/02_forces_9.webp 1152w" sizes="(min-width: 1152px) 1152px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 1152px) 1152px, 100vw" decoding="async" loading="lazy" src="./static/c56bbc036a983908ae60217b6cee1d41/b9785/02_forces_9.png" srcSet="./static/c56bbc036a983908ae60217b6cee1d41/e74ac/02_forces_9.png 288w,./static/c56bbc036a983908ae60217b6cee1d41/120bd/02_forces_9.png 576w,./static/c56bbc036a983908ae60217b6cee1d41/b9785/02_forces_9.png 1152w" alt="Малюнок 2.8: Вектор, який вказує з одного положення на інше, обчислюється як різниця між цими положеннями"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div>
    <figcaption>Малюнок 2.8: Вектор, який вказує з одного положення на інше, обчислюється як різниця між цими положеннями</figcaption>
  </figure>
</div>
<p>Єдина проблема в тому, що я не знаю відстані. Значення <code>G</code>, <code>mass1</code> і <code>mass2</code> вже відомі, але мені потрібно обчислити <code>distance</code> перш ніж запускати вищенаведений код. Але зачекайте, хіба я щосйно не зробив вектор, який вказує напрям від положення одного об’єкта до іншого? Довжина цього вектора має бути відстанню між двома об’єктами (див. малюнок 2.8).</p>
<p>Дійсно, якщо я додам ще один рядок коду і візьму магнітуду цього вектора до його нормалізації, то матиму відстань. І цього разу я пропущу крок з нормалізацією <code>normalize()</code> і використаю метод <code>setMag()</code>:</p>
<div class="codesplit callout not-prose" data-code-language="javascript"><div class="pair split"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">let</span> force = p5.<span class="hljs-property">Vector</span>.<span class="hljs-title function_">sub</span>(position2, position1);
</code></pre><div class="comment"><p>Вектор, який вказує від одного об’єкта до іншого.</p></div></div><div class="pair split"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">let</span> distance = force.<span class="hljs-title function_">mag</span>();
</code></pre><div class="comment"><p>Довжина (магнітуда) цього вектора - це відстань між двома об&#x27;єктами.</p></div></div><div class="pair split"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">let</span> magnitude = (G * mass1 * mass2) / (distance * distance);
</code></pre><div class="comment"><p>Формула гравітації для обчислення величини сили.</p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">force.<span class="hljs-title function_">setMag</span>(magnitude);
</code></pre><div class="comment"><p>Нормалізація і масштабування вектора сили до відповідної величини.</p></div></div></div>
<p>Зауважте, що я також змінив назву вектора <code>direction</code> на <code>force</code>. Зрештою, коли обчислення закінчено, вектор, з якого я почав, виявляється фактичним вектором сили, який мені був потрібен.</p>
<p>Тепер, коли я опрацював математику і код для обчислення сили тяжіння (емуляції гравітаційного тяжіння), звернімо увагу на застосування цієї техніки в контексті програми p5.js. Я продовжу використовувати клас <code>Mover</code> як відправну точку — шаблон для створення об’єктів із векторами положення, швидкості й прискорення, а також методом <code>applyForce()</code>. Я візьму цей клас для нової програми де буде:</p>
<ul>
  <li>Один об&#x27;єкт типу <code>Mover</code></li>
  <li>Один об&#x27;єкт типу <code>Attractor</code> (новий клас, який матиме фіксоване положення)</li>
</ul>
<p>Об’єкт <code>Mover</code> відчуватиме гравітаційне тяжіння до об’єкта <code>Attractor</code>, як показано на малюнку 2.9.</p>
<figure>
  <div data-gatsby-image-wrapper="" class="gatsby-image-wrapper gatsby-image-wrapper-constrained"><div style="max-width:2303px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg height=&#x27;688&#x27; width=&#x27;2303&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:#f8f8f8;position:absolute;top:0;left:0;bottom:0;right:0"></div><picture><source type="image/webp" data-srcset="./static/657282f05a3524fbb8eb2f636ef3119e/62bf8/02_forces_10.webp 576w,./static/657282f05a3524fbb8eb2f636ef3119e/65796/02_forces_10.webp 1152w,./static/657282f05a3524fbb8eb2f636ef3119e/262bf/02_forces_10.webp 2303w" sizes="(min-width: 2303px) 2303px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 2303px) 2303px, 100vw" decoding="async" loading="lazy" data-src="./static/657282f05a3524fbb8eb2f636ef3119e/721cf/02_forces_10.png" data-srcset="./static/657282f05a3524fbb8eb2f636ef3119e/1a296/02_forces_10.png 576w,./static/657282f05a3524fbb8eb2f636ef3119e/79356/02_forces_10.png 1152w,./static/657282f05a3524fbb8eb2f636ef3119e/721cf/02_forces_10.png 2303w" alt="Малюнок 2.9: Одна кулька типу Mover і один атрактор. Кулька відчуває тяжіння до атрактора"/></picture><noscript><picture><source type="image/webp" srcSet="./static/657282f05a3524fbb8eb2f636ef3119e/62bf8/02_forces_10.webp 576w,./static/657282f05a3524fbb8eb2f636ef3119e/65796/02_forces_10.webp 1152w,./static/657282f05a3524fbb8eb2f636ef3119e/262bf/02_forces_10.webp 2303w" sizes="(min-width: 2303px) 2303px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 2303px) 2303px, 100vw" decoding="async" loading="lazy" src="./static/657282f05a3524fbb8eb2f636ef3119e/721cf/02_forces_10.png" srcSet="./static/657282f05a3524fbb8eb2f636ef3119e/1a296/02_forces_10.png 576w,./static/657282f05a3524fbb8eb2f636ef3119e/79356/02_forces_10.png 1152w,./static/657282f05a3524fbb8eb2f636ef3119e/721cf/02_forces_10.png 2303w" alt="Малюнок 2.9: Одна кулька типу Mover і один атрактор. Кулька відчуває тяжіння до атрактора"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div>
  <figcaption>Малюнок 2.9: Одна кулька типу <code>Mover</code> і один атрактор. Кулька відчуває тяжіння до атрактора</figcaption>
</figure>
<p>Я почну зі створення базового класу <code>Attractor</code>, надавши йому положення і масу, а також метод для малювання самого себе (де розмір залежатиме від маси):</p>
<div class="codesplit callout not-prose" data-code-language="javascript"><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Attractor</span> {
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {
</code></pre><div class="comment"><p></p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">    <span class="hljs-variable language_">this</span>.<span class="hljs-property">position</span> = <span class="hljs-title function_">createVector</span>(width / <span class="hljs-number">2</span>, height / <span class="hljs-number">2</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">mass</span> = <span class="hljs-number">20</span>;
</code></pre><div class="comment"><p>Атрактор — це об&#x27;єкт, який у цьому випадку не рухається. Потрібна лише маса і позиція.</p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  }
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  <span class="hljs-title function_">show</span>(<span class="hljs-params"></span>) {
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">    <span class="hljs-title function_">stroke</span>(<span class="hljs-number">0</span>);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">    <span class="hljs-title function_">fill</span>(<span class="hljs-number">175</span>, <span class="hljs-number">200</span>);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">    <span class="hljs-title function_">circle</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">position</span>.<span class="hljs-property">x</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">position</span>.<span class="hljs-property">y</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">mass</span> * <span class="hljs-number">2</span>);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  }
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">}
</code></pre><div class="comment"><p></p></div></div></div>
<p>У коді я дода м змінну для зберігання екземпляра об’єкта <code>Attractor</code>:</p>
<div class="codesplit callout not-prose" data-code-language="javascript"><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">let</span> mover;
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">let</span> attractor;
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>) {
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  <span class="hljs-title function_">createCanvas</span>(<span class="hljs-number">640</span>, <span class="hljs-number">360</span>);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  mover = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Mover</span>(<span class="hljs-number">300</span>, <span class="hljs-number">100</span>, <span class="hljs-number">5</span>);
</code></pre><div class="comment"><p></p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">  attractor = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Attractor</span>();
</code></pre><div class="comment"><p>Ініціалізація об&#x27;єкта типу Attractor.</p></div></div><div class="pair"><pre><code class="hljs code language-javascript">}
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">draw</span>(<span class="hljs-params"></span>) {
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  <span class="hljs-title function_">background</span>(<span class="hljs-number">255</span>);
</code></pre><div class="comment"><p></p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">  attractor.<span class="hljs-title function_">show</span>();
</code></pre><div class="comment"><p>Малювання атрактора.</p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  mover.<span class="hljs-title function_">update</span>();
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  mover.<span class="hljs-title function_">show</span>();
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">}
</code></pre><div class="comment"><p></p></div></div></div>
<p>Це хороший початок: ескіз з об’єктами <code>Mover</code> і <code>Attractor</code>, створеними із класів які обробляють змінні та поведінку рухомих об’єктів і атракторів. Остання частина головоломки в тому, щоб один об’єкт притягував інший. Як ці два об’єкти можуть взаємодіяти? Це можна зробити кількома способами. Ось лише деякі з можливих варіантів:</p>
<table><thead><tr><th style="width:300px">Завдання</th><th>Функція</th></tr></thead><tbody><tr><td>
        <ol start="1">
          <li>Глобальна функція, яка приймає і <code>Attractor</code> і <code>Mover</code>.</li>
        </ol>
      </td><td>
        <pre><code>attraction(attractor, mover);</code></pre>
      </td></tr><tr><td>
        <ol start="2">
          <li>Метод у класі <code>Attractor</code>, який приймає <code>Mover</code>.</li>
        </ol>
      </td><td>
        <pre><code>attractor.attract(mover);</code></pre>
      </td></tr><tr><td>
        <ol start="3">
          <li>Метод у класі <code>Mover</code>, який приймає <code>Attractor</code>.</li>
        </ol>
      </td><td>
        <pre><code>mover.attractedTo(attractor);</code></pre>
      </td></tr><tr><td>
        <ol start="4">
          <li>Метод у класі <code>Attractor</code>, який приймає <code>Mover</code> і повертає <code>p5.Vector</code>, який є силою притягання. Потім ця сила передається у метод <code>applyForce()</code> об&#x27;єкта <code>Mover</code>.</li>
        </ol>
      </td><td>
        <pre><code>let force = attractor.attract(mover);
mover.applyForce(force);</code></pre>
      </td></tr></tbody></table>
<p>Варто розглядати різні варіанти й ви, ймовірно, зможете навести аргументи на користь кожного з цих підходів. Я хотів би відкинути перший, оскільки віддаю перевагу об’єктно-орієнтованому підходу, а не довільній функції, яка не прив’язана до класу <code>Mover</code> або класу <code>Attractor</code>. Незалежно від вибору варіантів 2 чи 3, різниця буде у тому як про це говорити “Атрактор притягує рухоме тіло” чи “Рухоме тіло притягується до атрактора”. Насправді мій улюблейний 4-й варіант. Я витратив чимало часу на розробку методу <code>applyForce()</code> і гадаю, що приклади будуть більш зрозумілими, якщо продовжити підхід із його використанням для застосування сил.</p>
<p>Іншими словами, там де я колись писав таким чином:</p>
<div class="codesplit callout not-prose" data-code-language="javascript"><div class="pair split"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">let</span> force = <span class="hljs-title function_">createVector</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0.1</span>);
mover.<span class="hljs-title function_">applyForce</span>(force);
</code></pre><div class="comment"><p>Вигадана сила.</p></div></div></div>
<div class="avoid-break">
  <p>Тепер я матиму наступне:</p>
  <div class="codesplit callout not-prose" data-code-language="javascript"><div class="pair split"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">let</span> force = attractor.<span class="hljs-title function_">attract</span>(mover);
</code></pre><div class="comment"><p>Сила притягання між двома об&#x27;єктами.</p></div></div><div class="pair"><pre><code class="hljs code language-javascript">mover.<span class="hljs-title function_">applyForce</span>(force);
</code></pre><div class="comment"><p></p></div></div></div>
</div>
<p>А значить функція <code>draw()</code> може бути написана так:</p>
<div class="codesplit callout not-prose" data-code-language="javascript"><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">draw</span>(<span class="hljs-params"></span>) {
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  <span class="hljs-title function_">background</span>(<span class="hljs-number">255</span>);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">
</code></pre><div class="comment"><p></p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">  <span class="hljs-keyword">let</span> force = attractor.<span class="hljs-title function_">attract</span>(mover);
  mover.<span class="hljs-title function_">applyForce</span>(force);
</code></pre><div class="comment"><p>Обчислення сили притягання і її застосування.</p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  mover.<span class="hljs-title function_">update</span>();
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  attractor.<span class="hljs-title function_">show</span>();
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  mover.<span class="hljs-title function_">show</span>();
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">}
</code></pre><div class="comment"><p></p></div></div></div>
<p>Я майже завершив. Оскільки я вирішив розмістити метод <code>attract()</code> всередині класу <code>Attractor</code>, мені його ще потрібно написати. Він повинен приймати об’єкт типу <code>Mover</code> і повертати <code>p5.Vector</code>:</p>
<div class="codesplit callout not-prose" data-code-language="javascript"><div class="pair"><pre><code class="hljs code language-javascript">  <span class="hljs-title function_">attract</span>(<span class="hljs-params">m</span>) {
</code></pre><div class="comment"><p></p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">    <span class="hljs-keyword">return</span> ______________;
</code></pre><div class="comment"><p>Необхідні математичні обчислення.</p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  }
</code></pre><div class="comment"><p></p></div></div></div>
<p>Що має відбуватися у методі? Вся ця гарна математика для обчислення гравітаційного притягання!</p>
<div class="codesplit callout not-prose" data-code-language="javascript"><div class="pair"><pre><code class="hljs code language-javascript">  <span class="hljs-title function_">attract</span>(<span class="hljs-params">mover</span>) {
</code></pre><div class="comment"><p></p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">    <span class="hljs-keyword">let</span> force = p5.<span class="hljs-property">Vector</span>.<span class="hljs-title function_">sub</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">position</span>, mover.<span class="hljs-property">position</span>);
</code></pre><div class="comment"><p>Який напрямок сили?</p></div></div><div class="pair"><pre><code class="hljs code language-javascript">    <span class="hljs-keyword">let</span> distance = force.<span class="hljs-title function_">mag</span>();
</code></pre><div class="comment"><p></p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">    <span class="hljs-keyword">let</span> strength = (<span class="hljs-variable language_">this</span>.<span class="hljs-property">mass</span> * mover.<span class="hljs-property">mass</span>) / (distance * distance);
    force.<span class="hljs-title function_">setMag</span>(strength);
</code></pre><div class="comment"><p>Обчислення величини сили притягання.</p></div></div><div class="pair"><pre><code class="hljs code language-javascript">
</code></pre><div class="comment"><p></p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">    <span class="hljs-keyword">return</span> force;
</code></pre><div class="comment"><p>Повернення сили, щоб її можна було застосувати там де вона потрібна!</p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  }
</code></pre><div class="comment"><p></p></div></div></div>
<p>І ось я закінчив. Ну, майже. Мені потрібно виправити один маленький недолік. Подивіться ще раз на код методу <code>attract()</code>. Бачите похилу риску для ділення? Щоразу, коли вам трапляється така, ви повинні поставити собі таке запитання: “Що станеться, якщо відстань виявиться дуже, дуже малим числом чи (що ще гірше!) нулем?!” Ви не можете ділити число на нуль, а якщо ви поділите число на щось маленьке типу 0.0001, то це еквівалентно множенню цього числа на 10 000! Це може бути прийнятним результатом цієї формули для гравітаційного тяжіння в реальному світі, але p5.js — це не реальний світ. У світі p5.js рухомий об’єкт може виявитися дуже, дуже близьким до атрактора і результівна сила може бути настільки великою, що об’єкт відлетить далеко за межі полотна.</p>
<p>І навпаки, що, якби рухомий об’єкт був, скажімо, на відстані 500 пікселів від атрактора (що цілком реально у p5.js)? Ви підносите відстань у квадрат, тож це призведе до ділення сили на 250 000. Зрештою ця сила може виявитися настільки слабкою, що зовсім не матиме якогось впливу.</p>
<p>Щоб уникнути обох крайнощів, доцільно обмежити діапазон тих значень, які <code>distance</code> може приймати, перш ніж передавати її у формулу. Можливо, незалежно від того де <em>фактично</em> розташований <code>Mover</code>, для цілей обчислення сили гравітаційного притягання, вам ніколи не варто вважати, що він знаходиться на відстані менше ніж 5 пікселів або більше ніж 25 пікселів від атрактора:</p>
<div class="codesplit callout not-prose" data-code-language="javascript"><div class="pair split"><pre><code class="hljs code language-javascript">  distance = <span class="hljs-title function_">constrain</span>(distance, <span class="hljs-number">5</span>, <span class="hljs-number">25</span>);
</code></pre><div class="comment"><p>Тут функція constrain() обмежує значення відстані між мінімумом (5) та максимумом (25).</p></div></div></div>
<p>Зрештою, вам вирішувати, яку поведінку ви хочете отримати від вашої симуляції. Але якщо ви вирішите, що вам потрібне прийнятне на вигляд притягання, яке ніколи не буде абсурдно слабким чи сильним, тоді обмеження відстані є хорошим підходом.</p>
<p>Клас <code>Mover</code> взагалі не змінився, тому давайте просто поди вимося на основний код і клас <code>Attractor</code> як ціле, додавши змінну <code>G</code> для універсальної гравітаційної константи. (На вебсайті книги ви побачите, що цей приклад також містить код, який дозволяє переміщувати об’єкт <code>Attractor</code> за допомогою мишки.)</p>
<div data-type="example">
  <h3 id="example-26-attraction"><a class="heading-link" href="#example-26-attraction">Приклад 2.6: Притягання</a></h3>
  <figure>
    <div class="not-prose clear-both my-4 overflow-hidden rounded border bg-gray-100" style="max-width:1152px"><div class="relative overflow-hidden rounded-t bg-white"><!-- <div class="absolute left-[50%] top-[50%] -translate-x-[50%] -translate-y-[50%] ">Loading sketch ...</div> --><iframe class="w-full border-none transition-opacity opacity-1000" style="aspect-ratio:2.667" loading="lazy" src="./examples/02_forces/example_2_6_attraction"></iframe></div><div class="flex items-center justify-between border-t"><div class="flex"><button class="flex items-center border-r px-2.5 py-1.5 text-sm hover:bg-gray-200"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" aria-hidden="true" class="h-[15px] w-[15px]" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg><span class="ml-1.5">Reset</span></button><button class="flex items-center border-r px-2.5 py-1.5 text-sm hover:bg-gray-200"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" aria-hidden="true" class="h-4 w-4" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" d="M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span class="ml-1">Pause</span></button></div><a href="https://editor.p5js.org/natureofcode/sketches/Cl0Eeaz_V" target="_blank" rel="noreferrer" class="flex items-center px-2.5 text-[0.8rem] hover:underline">Open in Web Editor<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" class="ml-1 text-gray-500" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></a></div></div>
    <figcaption></figcaption>
  </figure>
</div>
<div class="codesplit callout not-prose" data-code-language="javascript"><div class="pair split"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">let</span> mover;
<span class="hljs-keyword">let</span> attractor;
</code></pre><div class="comment"><p>Рухома кулька і атрактор.</p></div></div><div class="pair split"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">let</span> G = <span class="hljs-number">1.0</span>;
</code></pre><div class="comment"><p>Гравітаційна стала (для глобального масштабування).</p></div></div><div class="pair"><pre><code class="hljs code language-javascript">
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>) {
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  <span class="hljs-title function_">createCanvas</span>(<span class="hljs-number">640</span>, <span class="hljs-number">240</span>);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  mover = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Mover</span>(<span class="hljs-number">300</span>, <span class="hljs-number">50</span>, <span class="hljs-number">2</span>);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  attractor = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Attractor</span>();
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">}
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">draw</span>(<span class="hljs-params"></span>) {
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  <span class="hljs-title function_">background</span>(<span class="hljs-number">255</span>);
</code></pre><div class="comment"><p></p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">  <span class="hljs-keyword">let</span> force = attractor.<span class="hljs-title function_">attract</span>(mover);
  mover.<span class="hljs-title function_">applyForce</span>(force);
</code></pre><div class="comment"><p>Застосування сили тяжіння атрактора до кульки.</p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  mover.<span class="hljs-title function_">update</span>();
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  attractor.<span class="hljs-title function_">show</span>();
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  mover.<span class="hljs-title function_">show</span>();
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">}
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Attractor</span> {
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">    <span class="hljs-variable language_">this</span>.<span class="hljs-property">position</span> = <span class="hljs-title function_">createVector</span>(width / <span class="hljs-number">2</span>, height / <span class="hljs-number">2</span>);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">    <span class="hljs-variable language_">this</span>.<span class="hljs-property">mass</span> = <span class="hljs-number">20</span>;
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  }
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  <span class="hljs-title function_">attract</span>(<span class="hljs-params">mover</span>) {
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">    <span class="hljs-keyword">let</span> force = p5.<span class="hljs-property">Vector</span>.<span class="hljs-title function_">sub</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">position</span>, mover.<span class="hljs-property">position</span>);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">    <span class="hljs-keyword">let</span> distance = force.<span class="hljs-title function_">mag</span>();
</code></pre><div class="comment"><p></p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">    distance = <span class="hljs-title function_">constrain</span>(distance, <span class="hljs-number">5</span>, <span class="hljs-number">25</span>);
</code></pre><div class="comment"><p>Пам’ятайте, що нам потрібно обмежити значення дистанції, щоб наша кулька не вийшла з-під контролю.</p></div></div><div class="pair"><pre><code class="hljs code language-javascript">    <span class="hljs-keyword">let</span> strength = (G * <span class="hljs-variable language_">this</span>.<span class="hljs-property">mass</span> * mover.<span class="hljs-property">mass</span>) / (distance * distance);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">    force.<span class="hljs-title function_">setMag</span>(strength);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">    <span class="hljs-keyword">return</span> force;
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  }
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  <span class="hljs-title function_">show</span>(<span class="hljs-params"></span>) {
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">    <span class="hljs-title function_">stroke</span>(<span class="hljs-number">0</span>);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">    <span class="hljs-title function_">fill</span>(<span class="hljs-number">175</span>, <span class="hljs-number">200</span>);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">    <span class="hljs-title function_">circle</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">position</span>.<span class="hljs-property">x</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">position</span>.<span class="hljs-property">y</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">mass</span> * <span class="hljs-number">2</span>);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  }
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">}
</code></pre><div class="comment"><p></p></div></div></div>
<p>У цьому коді діаметр кульки та атрактора масштабується відповідно до маси кожного об’єкта. Однак це не точно відображає співвідношення між масою та розміром у нашому фізичному світі. Площа круга обчислюється за формулою <span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>π</mi><msup><mi>r</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">\pi{r^2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em"></span><span class="mord mathnormal" style="margin-right:0.03588em">π</span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em">r</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span></span> де <span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi></mrow><annotation encoding="application/x-tex">r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal" style="margin-right:0.02778em">r</span></span></span></span></span> являє собою радіус (половину діаметра) кола. (Більше про <span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>π</mi></mrow><annotation encoding="application/x-tex">\pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal" style="margin-right:0.03588em">π</span></span></span></span></span> буде у Розділі 3!) Таким чином, щоб точніше відобразити площу круга пропорційно наявній масі, мені потрібно взяти квадратний корінь від маси й подвоїти результат, щоб використати його як діаметр круга.</p>
<div data-type="exercise" class="callout">
  <h3 id="exercise-211"><a class="heading-link" href="#exercise-211">Вправа 2.11</a></h3>
  <p>Адаптуйте приклад 2.6, щоб зіставити масу об’єктів <code>Attractor</code> і <code>Mover</code> з площею відповідних їм кругів:</p>
  <div class="codesplit callout not-prose" data-code-language="javascript"><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-title function_">circle</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">position</span>.<span class="hljs-property">x</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">position</span>.<span class="hljs-property">y</span>, <span class="hljs-title function_">sqrt</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">mass</span>) * <span class="hljs-number">2</span>);
</code></pre><div class="comment"><p></p></div></div></div>
</div>
<p>Звісно, ви можете розширити код, включивши один <code>Attractor</code> і масив багатьох об’єктів <code>Mover</code>, так само як я включив масив об’єктів <code>Mover</code> у прикладі 2.5.</p>
<div data-type="example">
  <h3 id="example-27-attraction-with-many-movers"><a class="heading-link" href="#example-27-attraction-with-many-movers">Приклад 2.7: Притягання з багатьма об’єктами</a></h3>
  <figure>
    <div class="not-prose clear-both my-4 overflow-hidden rounded border bg-gray-100" style="max-width:1152px"><div class="relative overflow-hidden rounded-t bg-white"><!-- <div class="absolute left-[50%] top-[50%] -translate-x-[50%] -translate-y-[50%] ">Loading sketch ...</div> --><iframe class="w-full border-none transition-opacity opacity-1000" style="aspect-ratio:2.667" loading="lazy" src="./examples/02_forces/example_2_7_attraction_with_many_movers"></iframe></div><div class="flex items-center justify-between border-t"><div class="flex"><button class="flex items-center border-r px-2.5 py-1.5 text-sm hover:bg-gray-200"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" aria-hidden="true" class="h-[15px] w-[15px]" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg><span class="ml-1.5">Reset</span></button><button class="flex items-center border-r px-2.5 py-1.5 text-sm hover:bg-gray-200"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" aria-hidden="true" class="h-4 w-4" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" d="M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span class="ml-1">Pause</span></button></div><a href="https://editor.p5js.org/natureofcode/sketches/LSXJ6-VziJ" target="_blank" rel="noreferrer" class="flex items-center px-2.5 text-[0.8rem] hover:underline">Open in Web Editor<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" class="ml-1 text-gray-500" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></a></div></div>
    <figcaption></figcaption>
  </figure>
</div>
<div class="codesplit callout not-prose" data-code-language="javascript"><div class="pair split"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">let</span> movers = [];
<span class="hljs-keyword">let</span> attractor;
</code></pre><div class="comment"><p>Тепер буде 10 об&#x27;єктів типу Mover!</p></div></div><div class="pair"><pre><code class="hljs code language-javascript">
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>) {
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  <span class="hljs-title function_">createCanvas</span>(<span class="hljs-number">640</span>, <span class="hljs-number">360</span>);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
</code></pre><div class="comment"><p></p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">    movers[i] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Mover</span>(<span class="hljs-title function_">random</span>(width), <span class="hljs-title function_">random</span>(height), <span class="hljs-title function_">random</span>(<span class="hljs-number">0.5</span>, <span class="hljs-number">3</span>));
</code></pre><div class="comment"><p>Кожен об&#x27;єкт Mover ініціалізується випадковими значеннями.</p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  }
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  attractor = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Attractor</span>();
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">}
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">draw</span>(<span class="hljs-params"></span>) {
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  <span class="hljs-title function_">background</span>(<span class="hljs-number">255</span>);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  attractor.<span class="hljs-title function_">show</span>();
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; movers.<span class="hljs-property">length</span>; i++) {
</code></pre><div class="comment"><p></p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">    <span class="hljs-keyword">let</span> force = attractor.<span class="hljs-title function_">attract</span>(movers[i]);
</code></pre><div class="comment"><p>Обчислення сили притягання для кожного об’єкта Mover.</p></div></div><div class="pair"><pre><code class="hljs code language-javascript">    movers[i].<span class="hljs-title function_">applyForce</span>(force);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">    movers[i].<span class="hljs-title function_">update</span>();
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">    movers[i].<span class="hljs-title function_">show</span>();
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  }
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">}
</code></pre><div class="comment"><p></p></div></div></div>
<p>Це лише невелика порція можливостей з масивами об’єктів. У <a href="/particles#section-particles">Розділі 4</a>, який охоплює системи частинок, ви дізнаєтеся більше про додавання та видалення кількох об’єктів із полотна.</p>
<div data-type="exercise" class="callout">
  <h3 id="exercise-212"><a class="heading-link" href="#exercise-212">Вправа 2.12</a></h3>
  <p>У прикладі 2.7 є система (масив) об’єктів типу <code>Mover</code> і один об’єкт типу <code>Attractor</code>. Побудуйте приклад з системою і рухомих об’єктів і атракторів. Що, якщо зробити атрактори невидимими? Чи можете ви створити візерунок, чи дизайн на основі слідів від об’єктів, що рухаються навколо атракторів?</p>
</div>
<div data-type="exercise" class="callout">
  <h3 id="exercise-213"><a class="heading-link" href="#exercise-213">Вправа 2.13</a></h3>
  <p>Цей розділ не вказує, що кожна хороша симуляція p5.js повинна включати гравітаційне тяжіння. Напроти, вам слід творчо міркувати про те, як розробити власні правила для керування поведінкою об’єктів, використовуючи мій підхід до симуляції гравітаційного тяжіння як модель. Наприклад, що якщо спроєктувати силу тяжіння, яка слабшає, коли об’єкти наближаються, і посилюється, коли вони віддаляються? Або що, якщо ви розробите свій атрактор для притягування далеких об’єктів, але відштовхування близьких?</p>
</div>
<h2 id="the-n-body-problem"><a class="heading-link" href="#the-n-body-problem">Гравітаційна задача N тіл</a></h2>
<p>Я почав досліджувати гравітаційне тяжіння з простого сценарію, де <em>один об’єкт притягує інший об’єкт</em>, а потім перейшов до трохи складнішого, коли <em>один об’єкт притягує багато об’єктів</em>. Наступним логічним кроком є дослідження кейса, коли <em>багато об’єктів притягують багато об’єктів</em>!</p>
<p>Хоча досі й було корисно мати окремі класи <code>Mover</code> та <code>Attractor</code>, це розрізнення насправді дещо оманливе. Все-таки, згідно з третім законом Ньютона, всі сили діють попарно: якщо атрактор притягує рухомий об’єкт, то цей об’єкт також повинен притягувати й атрактор. Замість двох різних класів тут насправді потрібен один тип об’єкта під назвою, наприклад, <code>Body</code>. Кожне із таких тіл притягуватиме будь-яке інше.</p>
<p>Описаний тут сценарій зазвичай називають <strong>гравітаційною задачею N тіл</strong>. Вона передбачає розв’язання руху групи об’єктів, які взаємодіють через гравітаційні сили. Задача <em>двох тіл</em> є відомою вирішеною проблемою, де за участі лише двох тіл їх рухи можна точно обчислити за допомогою математичних рівнянь. Однак додаван ня ще одного тіла перетворює задачу <em>двох тіл</em> на задачу <em>трьох тіл</em>, і тут вже немає формального розв’язку (див. малюнок 2.10).</p>
<figure>
  <div data-gatsby-image-wrapper="" class="gatsby-image-wrapper gatsby-image-wrapper-constrained"><div style="max-width:2304px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg height=&#x27;916&#x27; width=&#x27;2304&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:#f8f8f8;position:absolute;top:0;left:0;bottom:0;right:0"></div><picture><source type="image/webp" data-srcset="./static/9a3678578070a5ce07e88e929113334a/7fb5d/02_forces_11.webp 576w,./static/9a3678578070a5ce07e88e929113334a/0d12f/02_forces_11.webp 1152w,./static/9a3678578070a5ce07e88e929113334a/ef184/02_forces_11.webp 2304w" sizes="(min-width: 2304px) 2304px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 2304px) 2304px, 100vw" decoding="async" loading="lazy" data-src="./static/9a3678578070a5ce07e88e929113334a/c5eef/02_forces_11.png" data-srcset="./static/9a3678578070a5ce07e88e929113334a/1fa51/02_forces_11.png 576w,./static/9a3678578070a5ce07e88e929113334a/33f38/02_forces_11.png 1152w,./static/9a3678578070a5ce07e88e929113334a/c5eef/02_forces_11.png 2304w" alt="Малюнок 2.10: Приклад передбачуваних траєкторій для задачі двох тіл проти складних траєкторій для задачі трьох тіл"/></picture><noscript><picture><source type="image/webp" srcSet="./static/9a3678578070a5ce07e88e929113334a/7fb5d/02_forces_11.webp 576w,./static/9a3678578070a5ce07e88e929113334a/0d12f/02_forces_11.webp 1152w,./static/9a3678578070a5ce07e88e929113334a/ef184/02_forces_11.webp 2304w" sizes="(min-width: 2304px) 2304px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 2304px) 2304px, 100vw" decoding="async" loading="lazy" src="./static/9a3678578070a5ce07e88e929113334a/c5eef/02_forces_11.png" srcSet="./static/9a3678578070a5ce07e88e929113334a/1fa51/02_forces_11.png 576w,./static/9a3678578070a5ce07e88e929113334a/33f38/02_forces_11.png 1152w,./static/9a3678578070a5ce07e88e929113334a/c5eef/02_forces_11.png 2304w" alt="Малюнок 2.10: Приклад передбачуваних траєкторій для задачі двох тіл проти складних траєкторій для задачі трьох тіл"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div>
  <figcaption>Малюнок 2.10: Приклад передбачуваних траєкторій для задачі двох тіл проти складних траєкторій для задачі трьох тіл</figcaption>
</figure>
<p>Хоча приклади, побудовані в цьому розділі, менш акуратні, ніж використання точних рівнянь руху, вони можуть моделювати проблеми як двох, так і трьох тіл. Для початку я переміщу метод <code>attract()</code> з класу <code>Attractor</code> у к лас <code>Mover</code> (який я тепер називатиму <code>Body</code>):</p>
<div class="codesplit callout not-prose" data-code-language="javascript"><div class="pair split"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Body</span> {
</code></pre><div class="comment"><p>Клас Mover тепер називається Body.</p></div></div><div class="pair"><pre><code class="hljs code language-javascript">
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  <span class="hljs-comment">/* Весь інший код такий самий як раніше */</span>
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">
</code></pre><div class="comment"><p></p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">  <span class="hljs-title function_">attract</span>(<span class="hljs-params">body</span>) {
    <span class="hljs-keyword">let</span> force = p5.<span class="hljs-property">Vector</span>.<span class="hljs-title function_">sub</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">position</span>, body.<span class="hljs-property">position</span>);
    <span class="hljs-keyword">let</span> d = <span class="hljs-title function_">constrain</span>(force.<span class="hljs-title function_">mag</span>(), <span class="hljs-number">5</span>, <span class="hljs-number">25</span>);
    <span class="hljs-keyword">let</span> strength = (G * (<span class="hljs-variable language_">this</span>.<span class="hljs-property">mass</span> * body.<span class="hljs-property">mass</span>)) / (d * d);
    force.<span class="hljs-title function_">setMag</span>(strength);
    body.<span class="hljs-title function_">applyForce</span>(force);
  }
</code></pre><div class="comment"><p>Метод attract() тепер є частиною класу Body.</p></div></div><div class="pair"><pre><code class="hljs code language-javascript">}
</code></pre><div class="comment"><p></p></div></div></div>
<p>Тепер залишається лише створити два об’єкти типу <code>Body</code> (назвемо їх <code>bodyA</code> і <code>bodyB</code>) та забезпечити їх взаємне притягання один до одного:</p>
<div class="codesplit callout not-prose" data-code-language="javascript"><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">let</span> bodyA;
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">let</span> bodyB;
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>) {
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  <span class="hljs-title function_">createCanvas</span>(<span class="hljs-number">640</span>, <span class="hljs-number">240</span>);
</code></pre><div class="comment"><p></p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">  bodyA = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Body</span>(<span class="hljs-number">320</span>, <span class="hljs-number">40</span>);
  bodyB = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Body</span>(<span class="hljs-number">320</span>, <span class="hljs-number">200</span>);
</code></pre><div class="comment"><p>Створення двох об’єктів Body:  A і B.</p></div></div><div class="pair"><pre><code class="hljs code language-javascript">}
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">draw</span>(<span class="hljs-params"></span>) {
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  <span class="hljs-title function_">background</span>(<span class="hljs-number">255</span>);
</code></pre><div class="comment"><p></p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">  bodyA.<span class="hljs-title function_">attract</span>(bodyB);
  bodyB.<span class="hljs-title function_">attract</span>(bodyA);
</code></pre><div class="comment"><p>A притягує B, а B притягує A.</p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  bodyA.<span class="hljs-title function_">update</span>();
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  bodyA.<span class="hljs-title function_">show</span>();
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  bodyB.<span class="hljs-title function_">update</span>();
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  bodyB.<span class="hljs-title function_">show</span>();
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">}
</code></pre><div class="comment"><p></p></div></div></div>
<p>Для будь-якої задачі N тіл, отриманий рух і його патерни повністю залежать від початкових умов. Наприклад, якщо я застосую конкретні значення для вект орів прискорення кожного тіла, де один вказуватиме праворуч, а інший — ліворуч, то в результаті отримаю кругову орбіту.</p>
<div data-type="example">
  <h3 id="example-28-two-body-attraction"><a class="heading-link" href="#example-28-two-body-attraction">Приклад 2.8: Притягання двох тіл</a></h3>
  <figure>
    <div class="not-prose clear-both my-4 overflow-hidden rounded border bg-gray-100" style="max-width:1152px"><div class="relative overflow-hidden rounded-t bg-white"><!-- <div class="absolute left-[50%] top-[50%] -translate-x-[50%] -translate-y-[50%] ">Loading sketch ...</div> --><iframe class="w-full border-none transition-opacity opacity-1000" style="aspect-ratio:2.667" loading="lazy" src="./examples/02_forces/example_2_8_two_body_attraction"></iframe></div><div class="flex items-center justify-between border-t"><div class="flex"><button class="flex items-center border-r px-2.5 py-1.5 text-sm hover:bg-gray-200"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" aria-hidden="true" class="h-[15px] w-[15px]" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg><span class="ml-1.5">Reset</span></button><button class="flex items-center border-r px-2.5 py-1.5 text-sm hover:bg-gray-200"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" aria-hidden="true" class="h-4 w-4" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" d="M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span class="ml-1">Pause</span></button></div><a href="https://editor.p5js.org/natureofcode/sketches/cmj37xPCM" target="_blank" rel="noreferrer" class="flex items-center px-2.5 text-[0.8rem] hover:underline">Open in Web Editor<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" class="ml-1 text-gray-500" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></a></div></div>
    <figcaption></figcaption>
  </figure>
</div>
<div class="codesplit callout not-prose" data-code-language="javascript"><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>) {
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  <span class="hljs-title function_">createCanvas</span>(<span class="hljs-number">640</span>, <span class="hljs-number">240</span>);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  bodyA = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Body</span>(<span class="hljs-number">320</span>, <span class="hljs-number">40</span>);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  bodyB = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Body</span>(<span class="hljs-number">320</span>, <span class="hljs-number">200</span>);
</code></pre><div class="comment"><p></p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">  bodyA.<span class="hljs-property">velocity</span> = <span class="hljs-title function_">createVector</span>(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>);
  bodyB.<span class="hljs-property">velocity</span> = <span class="hljs-title function_">createVector</span>(-<span class="hljs-number">1</span>, <span class="hljs-number">0</span>);
</code></pre><div class="comment"><p>Призначення кожному тілу горизонтальних швидкостей (у протилежних напрямках).</p></div></div><div class="pair"><pre><code class="hljs code language-javascript">}
</code></pre><div class="comment"><p></p></div></div></div>
<p>Код прикладу 2.8 можна поліпшити, додавши у конструктор класу <code>Body</code> параметри для швидкості. Однак, поки що цей спрощений підхід слугує швидким способом для експериментів з варіаціями на основі різних початкових положень і швидкостей.</p>
<div data-type="exercise" class="callout">
  <h3 id="exercise-214"><a class="heading-link" href="#exercise-214">Вправа 2.14</a></h3>
  <p>У статті <a href="https://doi.org/10.1017/fms.2013.5" target="_blank" rel="noopener">“Classification of Symmetry Groups for Planar n-Body Choreographies”</a> Джеймса Монтальді та Катріни Стеклз, досліджується концепція <em>хореографічних</em> рішень для задачі N тіл (визначається періодичними рухами, коли тіла слідують одне за одним через регулярні інтервали). Викладач і митець Ден Ґріс створив <a href="https://dangries.com/rectangleworld/demos/nBody" target="_blank" rel="noopener">інтерактивну демонстрацію цих хореографій</a>. Спробуйте додати третє або більше тіл до прикладу 2.8 і поекспериментуйте з налаштуванням початкових положень та швидкостей. Які хореографії зможете побудувати ви?</p>
</div>
<p>Тепер я готовий перейти до п рикладу з N тілами й використання масиву:</p>
<div class="codesplit callout not-prose" data-code-language="javascript"><div class="pair split"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">let</span> bodies = [];
</code></pre><div class="comment"><p>Починаємо з порожнього масиву.</p></div></div><div class="pair"><pre><code class="hljs code language-javascript">
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>) {
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  <span class="hljs-title function_">createCanvas</span>(<span class="hljs-number">640</span>, <span class="hljs-number">240</span>);
</code></pre><div class="comment"><p></p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
    bodies[i] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Body</span>(<span class="hljs-title function_">random</span>(width), <span class="hljs-title function_">random</span>(height));
  }
</code></pre><div class="comment"><p>Заповнюємо масив об’єктами Body.</p></div></div><div class="pair"><pre><code class="hljs code language-javascript">}
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">draw</span>(<span class="hljs-params"></span>) {
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  <span class="hljs-title function_">background</span>(<span class="hljs-number">255</span>);
</code></pre><div class="comment"><p></p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; bodies.<span class="hljs-property">length</span>; i++) {
    bodies[i].<span class="hljs-title function_">update</span>();
    bodies[i].<span class="hljs-title function_">show</span>();
  }
</code></pre><div class="comment"><p>Перебираємо масив для оновлення та відображення всіх тіл.</p></div></div><div class="pair"><pre><code class="hljs code language-javascript">}
</code></pre><div class="comment"><p></p></div></div></div>
<p>У функцію <code>draw()</code> потрібно додати трохи магії, щоб кожне тіло впливало своєю гравітаційною силою на усі інші тіла. Наразі код читається так: “Для кожного тіла <code>i</code> застосуй оновлення та намалюй його”. Щоб притягнути кожне інше тіло <code>j</code> до кожного тіла <code>i</code>, потрібно додати вкладений цикл і відредагувати код, щоб він казав: “Для кожного тіла <code>i</code> притягни кожне інше тіло <code>j</code>, онови та намалюй його”:</p>
<div class="codesplit callout not-prose" data-code-language="javascript"><div class="pair split"><pre><code class="hljs code language-javascript">  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; bodies.<span class="hljs-property">length</span>; i++) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = <span class="hljs-number">0</span>; j &lt; bodies.<span class="hljs-property">length</span>; j++) {
</code></pre><div class="comment"><p>Для кожного тіла оновіть кожне тіло з масиву!</p></div></div><div class="pair"><pre><code class="hljs code language-javascript">      <span class="hljs-keyword">let</span> force = bodies[j].<span class="hljs-title function_">attract</span>(bodies[i]);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">      movers[i].<span class="hljs-title function_">applyForce</span>(force);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">    }
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">    movers[i].<span class="hljs-title function_">update</span>();
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">    movers[i].<span class="hljs-title function_">show</span>();
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  }
</code></pre><div class="comment"><p></p></div></div></div>
<p>Однак код має одну маленьку проблему. Коли кожне тіло <code>i</code> притягує кожне тіло <code>j</code>, що відбувається, коли <code>i</code> дорівнює <code>j</code>? Чи повинно тіло під індексом 3 притягувати тіло під індексом 3? Відповідь, звісно, ні. Якщо є п’ять тіл, то потрібно, щоб тіло 3 притягувало лише тіла 0, 1, 2 і 4, пропускаючи себе. Я врахую це, додавши умовний оператор, щоб пропустити застосу вання сили, коли <code>i</code> дорівнює <code>j</code>.</p>
<div data-type="example">
  <h3 id="example-29-n-bodies"><a class="heading-link" href="#example-29-n-bodies">Приклад 2.9: N тіла</a></h3>
  <figure>
    <div class="not-prose clear-both my-4 overflow-hidden rounded border bg-gray-100" style="max-width:1152px"><div class="relative overflow-hidden rounded-t bg-white"><!-- <div class="absolute left-[50%] top-[50%] -translate-x-[50%] -translate-y-[50%] ">Loading sketch ...</div> --><iframe class="w-full border-none transition-opacity opacity-1000" style="aspect-ratio:2.667" loading="lazy" src="./examples/02_forces/example_2_9_n_bodies"></iframe></div><div class="flex items-center justify-between border-t"><div class="flex"><button class="flex items-center border-r px-2.5 py-1.5 text-sm hover:bg-gray-200"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" aria-hidden="true" class="h-[15px] w-[15px]" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg><span class="ml-1.5">Reset</span></button><button class="flex items-center border-r px-2.5 py-1.5 text-sm hover:bg-gray-200"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" aria-hidden="true" class="h-4 w-4" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" d="M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span class="ml-1">Pause</span></button></div><a href="https://editor.p5js.org/natureofcode/sketches/uT9VpVvCO" target="_blank" rel="noreferrer" class="flex items-center px-2.5 text-[0.8rem] hover:underline">Open in Web Editor<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" class="ml-1 text-gray-500" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></a></div></div>
    <figcaption></figcaption>
  </figure>
</div>
<div class="codesplit callout not-prose" data-code-language="javascript"><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">let</span> bodies = [];
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>) {
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  <span class="hljs-title function_">createCanvas</span>(<span class="hljs-number">640</span>, <span class="hljs-number">240</span>);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">    bodies[i] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Body</span>(<span class="hljs-title function_">random</span>(width), <span class="hljs-title function_">random</span>(height), <span class="hljs-title function_">random</span>(<span class="hljs-number">0.1</span>, <span class="hljs-number">2</span>));
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  }
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">}
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">draw</span>(<span class="hljs-params"></span>) {
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  <span class="hljs-title function_">background</span>(<span class="hljs-number">255</span>);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; bodies.<span class="hljs-property">length</span>; i++) {
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = <span class="hljs-number">0</span>; j &lt; bodies.<span class="hljs-property">length</span>; j++) {
</code></pre><div class="comment"><p></p></div></div><div class="pair split"><pre><code class="hljs code language-javascript">      <span class="hljs-keyword">if</span> (i !== j) {
</code></pre><div class="comment"><p>Не притягувати тіло само до себе!</p></div></div><div class="pair"><pre><code class="hljs code language-javascript">        <span class="hljs-keyword">let</span> force = bodies[j].<span class="hljs-title function_">attract</span>(bodies[i]);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">        bodies[i].<span class="hljs-title function_">applyForce</span>(force);
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">      }
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">    }
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">    bodies[i].<span class="hljs-title function_">update</span>();
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">    bodies[i].<span class="hljs-title function_">show</span>();
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">  }
</code></pre><div class="comment"><p></p></div></div><div class="pair"><pre><code class="hljs code language-javascript">}
</code></pre><div class="comment"><p></p></div></div></div>
<p>Рішення з вкладеним циклом у прикладі 2.9 призводить до так званої “квадратичної складності алгоритму” — <span data-type="equation" class="math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span> — кількість обчислень дорівнює кількості тіл у квадраті. Якщо збільшити кількість тіл, симуляція почне значно сповільнюватися через кількість необхідних обчислень.</p>
<p>У <a href="/autonomous-agents#section-autonomous-agents">Розділі 5</a> я розгляну стратегії оптимізації програм, подібних до цієї, з особливим акцентом на алгоритмах просторового розподілу. Просторовий розподіл, у поєднанні з концепцією дерева квадрантів (квадродерев) і алгоритмом Барнса-Хата, особливо ефективний для підвищення ефективності у симуляціях, подібних до N тіл, які тут обговорювалися.</p>
<div data-type="exercise" class="callout">
  <h3 id="exercise-215"><a class="heading-link" href="#exercise-215">Вправа 2.15</a></h3>
  <p>Змініть силу притягання в прикладі 2.9 на силу відштовхування. Чи можете ви створити приклад, у якому всі об’єкти <code>Body</code> притягуються до курсора, але відштовхують одне одного? Подумайте про те, як вам потрібно збалансувати відносну величину сил і як найбільш ефективно використовувати відстань у ваших обчисленнях сил.</p>
</div>
<div data-type="exercise" class="callout">
  <h3 id="exercise-216"><a class="heading-link" href="#exercise-216">Вправа 2.16</a></h3>
  <p>Чи можете ви розташувати тіла у симуляції N тіл так, щоб вони обертались навколо центру полотна, що нагадуватиме спіральну галактику? Можливо, вам знадобиться включити додаткове велике тіло у центрі, щоб утримувати все разом. Одне з рішень пропонується у моєму відео <a href="https://thecodingtrain.com/nbody" target="_blank" rel="noopener">“Mutual Attraction” із серії Nature of Code на сайті Coding Train</a>.</p>
  <figure data-type="example">
    <div class="not-prose clear-both my-4 overflow-hidden rounded border bg-gray-100" style="max-width:1152px"><div class="relative overflow-hidden rounded-t bg-white"><!-- <div class="absolute left-[50%] top-[50%] -translate-x-[50%] -translate-y-[50%] ">Loading sketch ...</div> --><iframe class="w-full border-none transition-opacity opacity-1000" style="aspect-ratio:2.667" loading="lazy" src="./examples/02_forces/exercise_2_16"></iframe></div><div class="flex items-center justify-between border-t"><div class="flex"><button class="flex items-center border-r px-2.5 py-1.5 text-sm hover:bg-gray-200"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" aria-hidden="true" class="h-[15px] w-[15px]" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg><span class="ml-1.5">Reset</span></button><button class="flex items-center border-r px-2.5 py-1.5 text-sm hover:bg-gray-200"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" aria-hidden="true" class="h-4 w-4" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" d="M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span class="ml-1">Pause</span></button></div><a href="https://editor.p5js.org/natureofcode/sketches/Qxahj4k5D" target="_blank" rel="noreferrer" class="flex items-center px-2.5 text-[0.8rem] hover:underline">Open in Web Editor<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" class="ml-1 text-gray-500" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></a></div></div>
    <figcaption></figcaption>
  </figure>
</div>
<div data-type="project" class="callout">
  <h3 id="the-ecosystem-project-3"><a class="heading-link" href="#the-ecosystem-project-3">Проєкт “Екосистема”</a></h3>
  <p>Впровадьте концепцію сил у свою екосистему. Як інші фактори середовища (наприклад, вода з ділянками мулу або течія річки) можуть впливати на рух персонажа в екосистемі?</p>
  <p>Спробуйте ввести в оточення інші елементи (їжу, хижака) з якими створіння може взаємодіяти. Чи створіння відчуває тяжіння, чи відштовхування до певних речей у своєму світі? Чи можете ви мислити абстрактніше і створювати сили на основі бажань чи цілей створіння?</p>
  <figure>
    <div data-gatsby-image-wrapper="" class="gatsby-image-wrapper gatsby-image-wrapper-constrained"><div style="max-width:2304px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg height=&#x27;1420&#x27; width=&#x27;2304&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:#d8d8d8;position:absolute;top:0;left:0;bottom:0;right:0"></div><picture><source type="image/webp" data-srcset="./static/5eb1528e31cef0659c33c8cd669f381d/be6fc/02_forces_12.webp 576w,./static/5eb1528e31cef0659c33c8cd669f381d/7c4ba/02_forces_12.webp 1152w,./static/5eb1528e31cef0659c33c8cd669f381d/2e9c6/02_forces_12.webp 2304w" sizes="(min-width: 2304px) 2304px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 2304px) 2304px, 100vw" decoding="async" loading="lazy" data-src="./static/5eb1528e31cef0659c33c8cd669f381d/43bff/02_forces_12.png" data-srcset="./static/5eb1528e31cef0659c33c8cd669f381d/09264/02_forces_12.png 576w,./static/5eb1528e31cef0659c33c8cd669f381d/8a8ae/02_forces_12.png 1152w,./static/5eb1528e31cef0659c33c8cd669f381d/43bff/02_forces_12.png 2304w" alt=""/></picture><noscript><picture><source type="image/webp" srcSet="./static/5eb1528e31cef0659c33c8cd669f381d/be6fc/02_forces_12.webp 576w,./static/5eb1528e31cef0659c33c8cd669f381d/7c4ba/02_forces_12.webp 1152w,./static/5eb1528e31cef0659c33c8cd669f381d/2e9c6/02_forces_12.webp 2304w" sizes="(min-width: 2304px) 2304px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 2304px) 2304px, 100vw" decoding="async" loading="lazy" src="./static/5eb1528e31cef0659c33c8cd669f381d/43bff/02_forces_12.png" srcSet="./static/5eb1528e31cef0659c33c8cd669f381d/09264/02_forces_12.png 576w,./static/5eb1528e31cef0659c33c8cd669f381d/8a8ae/02_forces_12.png 1152w,./static/5eb1528e31cef0659c33c8cd669f381d/43bff/02_forces_12.png 2304w" alt=""/></picture></noscript>
      <script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div>
    <figcaption></figcaption>
  </figure>
</div>
</section>
<hr/><section class="not-prose flex w-full justify-between"><div><a class="group block" href="./vectors.html"><p class="text-gray-500">Попередній розділ</p><span class="text-lg font-semibold group-hover:underline">← <!-- -->1. Вектори</span></a></div><div><a class="group block text-right" href="./oscillation.html"><p class="text-gray-500">Наступний розділм</p><span class="text-lg font-semibold group-hover:underline">3. Коливання<!-- --> →</span></a></div></section></main></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div>
<script src="./assets/js/main.js"></script>
</body></html>